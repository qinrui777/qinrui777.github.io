<!DOCTYPE html>


  <html lang="en">
    

    <head>
      <meta charset="utf-8" />
        
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title> Hexo</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/palm-tree.ico" />
       <link rel="stylesheet" href="/dist/main.css">
      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css"
      />
      <link rel="stylesheet" href="/css/custom.css"> 
      <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
       
 

      <!-- mermaid -->
      
    </head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      
<section class="cover">
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover2.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">Hexo</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['ä¸€ç¬‘çš†æ˜¥', '', ''],
        startDelay: 0,
        typeSpeed: 200,
        loop: true,
        backSpeed: 100,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  
  <article class="articles">
    
    
    
    
    <article
  id="post-Clean-up-Azure-Container-Registry"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/11/05/Clean-up-Azure-Container-Registry/"
    >Clean up Azure Container Registry</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2021/11/05/Clean-up-Azure-Container-Registry/" class="article-date">
  <time datetime="2021-11-05T03:04:19.000Z" itemprop="datePublished">2021-11-05</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Docker/">Docker</a>
  </div>
 
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h3 id="èµ·å› "><a href="#èµ·å› " class="headerlink" title="èµ·å› "></a>èµ·å› </h3><p>æ‰“å¼€é¡¹ç›®ä¸Šç”¨äº†2-3å¹´çš„Azure Container Registryï¼Œå°±åƒæ‰“å¼€äº†ä¸€ä¸ªå°˜å°å¤šå¹´çš„ä»“åº“ä¸€èˆ¬ã€‚ä½¿ç”¨è€…ä¸åœçš„å¾€ä»“åº“é‡Œå †æ”¾ç‰©å“ï¼Œä½†ä»æ¥ä¸æ•´ç†ã€æ‰“æ‰«ã€‚ä»“åº“çš„å®¹ç§¯è¶³å¤Ÿå¤§ï¼Œä¸è€ƒè™‘æˆæœ¬çš„è¯ï¼Œéƒ½ä¸æ˜¯é—®é¢˜ã€‚ä½†æœ¬ç€â€œæ¸…é“å¤«â€çš„ç†å¿µï¼Œæœ¬ç€æ¸…æ¥šæ½œåœ¨é—®é¢˜çš„å‡ºå‘ç‚¹ï¼ˆå…¶å®æ˜¯ä¸æƒ³åé¢æ‰“å¼€ä»“åº“çš„äººä¹Ÿå£å‡ºâ€œç‹‚è¨€â€ï¼Œè€Œæ¥è´£æ€ªå‰é¢ç»´æŠ¤çš„äººã€‚ï¼‰</p>
<h3 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h3><p>åœ¨ä¸ªäººç”µè„‘ä¸Šï¼Œä¸‹è½½é•œåƒè¿‡å¤šä¸”é•¿æœŸä¸åˆ é™¤ä¹Ÿä¼šé¢ä¸´ç£ç›˜ä¸è¶³çš„é£é™©ã€‚æˆ–å¤šæˆ–å°‘éƒ½é€‚ç”¨è¿‡ç±»ä¼¼ <code>docker image rm</code>çš„å‘½ä»¤ï¼Œä½†ä¸€ä¸ªä¸€ä¸ªçš„æ¸…ç†éš¾å…éº»çƒ¦è€—æ—¶ã€‚è¿™æ—¶å€™å°±éœ€è¦ä¸€ä¸ªä¸€é”®æå®šçš„å‘½ä»¤ï¼Œä¾‹å¦‚<code>docker system prune</code>ã€‚</p>
<p>å¯¹äºAzure Container Registry è¿™æ ·ä¸€ä¸ªæˆç†Ÿçš„äº§å“æœåŠ¡ï¼Œå·²ç»ä¸å»ºè®®ä¸ªäººå»é€ è½®å­ã€å†™è„šæœ¬äº†ã€‚æœç´¢ä¸€ç•ªä¹‹åæ‰¾åˆ°äº†ä¸€ç¯‡ä¸é”™çš„<a href="https://zimmergren.net/purging-container-images-from-azure-container-registry/" target="_blank" rel="noopener">æ–‡ç« </a>ï¼Œé‡Œé¢æåˆ°äº†ä¸¤ä¸ªå…·ä½“çš„æ–¹æ³•ã€‚</p>
<ul>
<li>1.Set a retention policy for untagged manifests (<a href="https://docs.microsoft.com/en-us/azure/container-registry/container-registry-retention-policy?WT.mc_id=AZ-MVP-4021705" target="_blank" rel="noopener">Microsoft Docs</a>)</li>
<li>2.Automatically purge images from an Azure Container Registry (<a href="https://docs.microsoft.com/en-us/azure/container-registry/container-registry-auto-purge" target="_blank" rel="noopener">Microsoft Docs</a>)</li>
</ul>
<p>å…·ä½“çš„ä½¿ç”¨å½“ç„¶è¿˜æ˜¯å‚ç…§azureå®˜æ–¹çš„æ–‡æ¡£ä¸ºå®œï¼Œæ¯•ç«Ÿå…·ä½“å®è·µå› æƒ…å†µè€Œå¼‚ã€‚</p>
<p>å¯¹äºï¼Œéœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œè¯¥policyå¹¶ä¸èƒ½ç«‹åˆ»å¯¹ç°æœ‰çš„é•œåƒç”Ÿæ•ˆï¼ŒåŸæ–‡æè¿°å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>! Important</p>
<p>The retention policy applies only to untagged manifests with timestamps after the policy is enabled. Untagged manifests in the registry with earlier timestamps arenâ€™t subject to the policy. For other options to delete image data, see examples in Delete container images in Azure Container Registry.</p>
</blockquote>
<p>è¿è¡Œäº†ä¸€äº›å‘½ä»¤ï¼š</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ é™¤2021-04-01 ä¹‹å‰çš„é•œåƒ, æœ‰dry-runå‚æ•°ä¹Ÿå¯ä»¥æå‰æµ‹è¯•ä¸€ä¸‹</span></span><br><span class="line">az acr repository show-manifests --name &lt;YourACRName&gt; --repository demo-web-app \</span><br><span class="line">    --orderby time_asc --query <span class="string">"[?timestamp &lt; '2021-04-01'].digest"</span> -o tsv \</span><br><span class="line">    | xargs -I% az acr repository delete --name &lt;YourACRName&gt; --image demo-web-app@% --yes</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®å®šæ—¶ä»»åŠ¡ï¼Œä»¥åå°±ä¼šè‡ªåŠ¨æŒ‰ç…§æ—¶é—´æ¥åˆ é™¤</span></span><br><span class="line">PURGE_CMD=<span class="string">"acr purge --filter 'service-one:.*' --ago 180d"</span></span><br><span class="line"></span><br><span class="line">az acr task create --name purgeAppOneImage  \</span><br><span class="line">--cmd <span class="string">"<span class="variable">$PURGE_CMD</span>"</span> \</span><br><span class="line">--schedule <span class="string">"0 0 * * 2"</span> \</span><br><span class="line">--registry &lt;YourACRName&gt; \</span><br><span class="line">--context /dev/null</span><br></pre></td></tr></table></figure>
<h3 id="æ„å¤–æ”¶è·"><a href="#æ„å¤–æ”¶è·" class="headerlink" title="æ„å¤–æ”¶è·"></a>æ„å¤–æ”¶è·</h3><p><strong>tag or digest</strong></p>
<blockquote>
<ul>
<li>The â€œdigestâ€ is a hash of the manifest, introduced in Docker registry v2.</li>
<li>The image ID is a hash of the local image JSON configuration.</li>
</ul>
</blockquote>
<p>åœ¨ä½¿ç”¨ Dockerfile æ„å»ºé•œåƒæ—¶ï¼Œbase imageçš„ä½¿ç”¨ä¹Ÿæ¶‰åŠè¿™ç‚¹ã€‚æå‡ºäº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆ <a href="https://github.com/safe-waters/docker-lock" target="_blank" rel="noopener">docker-lock</a> ï¼Œæœ‰å…´è¶£çš„å¯ä»¥ä½¿ç”¨çœ‹çœ‹ï¼Œæ¬¢è¿äº¤æµå¿ƒå¾—ä½“ä¼šï½</p>
<blockquote>
<p>Link: <a href="https://developers.redhat.com/blog/2020/03/24/red-hat-universal-base-images-for-docker-users#" target="_blank" rel="noopener">https://developers.redhat.com/blog/2020/03/24/red-hat-universal-base-images-for-docker-users#</a></p>
<p>As you discovered, with docker, tags are mutable. This means that an update to a base image could be pushed that breaks your application code, even if you did not change any of your application code.</p>
<p>You could eliminate this class of bugs by referencing base images by digest rather than by tag. For instance, instead of ruby:2.6.3, use ruby:2.6.3@sha256:2afcffd1a8276d58ef7d2c6d440c83290831abc2d80772a7af720db9aca9cd2e. If you reference by digest, when a new update is pushed to ruby:2.6.3, your application will still use the base image referenced by the digest, and you wonâ€™t be affected by the update.</p>
<p>Specifying digests manually is a pain for a variety of reasons. Instead, consider using docker-lock <a href="https://github.com/michaelp..." target="_blank" rel="noopener">https://github.com/michaelp...</a>. docker-lock is a cli-plugin for docker that manages digests in a lockfile (think package-lock.json), so you can still reference base images by tag but receive the benefits of referencing them by digest.</p>
<p>docker-lock ships with 3 commands that take you from development to production:<br>docker lock generate finds base images in your docker and docker-compose files and generates a lockfile containing digests that correspond to their tags.<br>docker lock verify lets you know if there are more recent digests than those last recorded in the lockfile.<br>docker lock rewrite rewrites Dockerfiles and docker-compose files to include digests.</p>
</blockquote>
<p><strong>using-container-image-digests-in-kubernetes-manifests</strong></p>
<blockquote>
<p><a href="https://cloud.google.com/architecture/using-container-image-digests-in-kubernetes-manifests" target="_blank" rel="noopener">https://cloud.google.com/architecture/using-container-image-digests-in-kubernetes-manifests</a>)</p>
</blockquote>
<p> <strong>Tag Count =? Mainfest Count</strong></p>
<blockquote>
<p>è¯¦è§£å¯è§<a href="https://medium.com/@anantvardhan.04/azure-container-registry-acr-cleanup-dfeb8a8bb6a9" target="_blank" rel="noopener">æ–‡ç« </a></p>
</blockquote>
<hr>
<p>Reference:</p>
<ul>
<li><a href="https://zimmergren.net/purging-container-images-from-azure-container-registry/" target="_blank" rel="noopener">https://zimmergren.net/purging-container-images-from-azure-container-registry/</a></li>
<li><a href="https://docs.microsoft.com/en-us/azure/container-registry/container-registry-retention-policy" target="_blank" rel="noopener">https://docs.microsoft.com/en-us/azure/container-registry/container-registry-retention-policy</a></li>
<li><a href="https://docs.microsoft.com/en-us/azure/container-registry/container-registry-auto-purge" target="_blank" rel="noopener">https://docs.microsoft.com/en-us/azure/container-registry/container-registry-auto-purge</a></li>
<li><a href="https://www.ibm.com/docs/en/filenet-p8-platform/5.5.x?topic=deployment-choosing-image-tags-digest" target="_blank" rel="noopener">https://www.ibm.com/docs/en/filenet-p8-platform/5.5.x?topic=deployment-choosing-image-tags-digest</a></li>
<li><a href="https://medium.com/@anantvardhan.04/azure-container-registry-acr-cleanup-dfeb8a8bb6a9" target="_blank" rel="noopener">https://medium.com/@anantvardhan.04/azure-container-registry-acr-cleanup-dfeb8a8bb6a9</a></li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Azure/">Azure</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/">Docker</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Bash-å¯¹å˜é‡åŠ¨æ‰‹è„š"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/11/03/Bash-å¯¹å˜é‡åŠ¨æ‰‹è„š/"
    >Bash-å¯¹å˜é‡åŠ¨æ‰‹è„š</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2021/11/03/Bash-å¯¹å˜é‡åŠ¨æ‰‹è„š/" class="article-date">
  <time datetime="2021-11-03T08:31:56.000Z" itemprop="datePublished">2021-11-03</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Bash/">Bash</a>
  </div>
 
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>æ‰ç–å­¦æµ…ï¼Œæœ€è¿‘æ‰æ³¨æ„åˆ°å˜é‡æ“ä½œä¸­çš„ä¸€äº›ç”¨æ³•ï¼Œä¹Ÿç”±æ­¤æ‰¾åˆ°äº†ä¸€ä¸ª<a href="https://tldp.org/LDP/Bash-Beginners-Guide/html/sect_10_03.html" target="_blank" rel="noopener">å¥½ç½‘ç«™</a>ã€‚</p>
<p>Operations on variables</p>
<ul>
<li>1.Length of a variableï¼ˆè·å–å˜é‡é•¿åº¦ï¼‰</li>
<li>2.Transformations of variables ï¼ˆå˜æ¢å˜é‡ï¼‰</li>
<li>3.Removing substrings (åˆ é™¤å˜é‡ä¸­çš„å­ä¸²)</li>
<li>4.Replacing parts of variable names (æ›¿æ¢å˜é‡ä¸­çš„ä¸€éƒ¨åˆ†)</li>
</ul>
<p>å…¶ä¸­çš„ç¬¬2ç‚¹çš„å†™æ³•å°¤å…¶çš„æƒŠè‰³åˆ°æˆ‘ï¼Œéå¸¸çš„ç®€æ´ä½†æœ‰æ•ˆï¼Œä¾›ä¸Šç½‘ç«™ä¸Šçš„ä»£ç å¸®åŠ©ç†è§£ä¸€ä¸‹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">~ <span class="built_in">echo</span> <span class="variable">$&#123;TEST:-test&#125;</span></span><br><span class="line"><span class="built_in">test</span></span><br><span class="line"></span><br><span class="line">~ <span class="built_in">echo</span> <span class="variable">$TEST</span></span><br><span class="line"></span><br><span class="line">~ <span class="built_in">export</span> TEST=a_string</span><br><span class="line"></span><br><span class="line">~ <span class="built_in">echo</span> <span class="variable">$&#123;TEST:-test&#125;</span></span><br><span class="line">a_string</span><br><span class="line"></span><br><span class="line">~ <span class="built_in">echo</span> <span class="variable">$&#123;TEST2:-$TEST&#125;</span></span><br><span class="line">a_string</span><br></pre></td></tr></table></figure>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Bash/">Bash</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Shell/">Shell</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-ç¬¬äºŒæ¬¡å­¦ä¹ è‹±è¯­"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/10/25/ç¬¬äºŒæ¬¡å­¦ä¹ è‹±è¯­/"
    >ç¬¬äºŒæ¬¡å­¦ä¹ è‹±è¯­</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2021/10/25/ç¬¬äºŒæ¬¡å­¦ä¹ è‹±è¯­/" class="article-date">
  <time datetime="2021-10-25T09:21:48.000Z" itemprop="datePublished">2021-10-25</time>
</a>  
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>æœ€è¿‘å·¥ä½œä¸­çš„é¡¹ç›®éœ€è¦ä¸å›½å¤–çš„æ²Ÿé€šï¼Œè‹±è¯­æ— å¯åšéçš„æˆä¸ºå½¼æ­¤èƒ½å¬æ‡‚çš„é€šç”¨è¯­è¨€ã€‚è¿™ä¹Ÿæ˜¯è‡ªå­¦ç”Ÿç”Ÿæ¶¯ä¹‹åéš¾é“è®¤è¯†åˆ°è‹±è¯­çš„é‡è¦æ€§çš„æ—¶åˆ»ä¹‹ä¸€ã€‚å¬è¯´è¯»å†™è¿™å››é—¨åŠŸè¯¾ä¸€èµ·ä¸Šé˜µï¼Œèµ·åˆè®©äººå¤šå°‘æœ‰äº›â€œç•æƒ§â€ã€‚ä½†å¥½åœ¨æœ‰äº†ä¸€ä¸ªè®²è‹±è¯­çš„ç¯å¢ƒåï¼Œé€¼è¿«è‡ªå·±å»å­¦ä¹ å’Œç»ƒä¹ ï¼Œä¹Ÿæœ‰æ˜æ˜¾çš„ä½†æ•ˆæœä¸æ˜¯å¾ˆå¤§çš„æå‡ã€‚</p>
<p>ä¹Ÿä¾§é¢éªŒè¯äº†å­¦ç”Ÿæ—¶ä»£è‹±è¯­å­¦ä¹ çš„å±€é™æ€§ï¼Œå°±è‡ªèº«è€Œè¨€ï¼Œèµ·åˆçš„ç¡®å¯ä»¥å¼€å£ï¼Œä½†è®²çš„å†…å®¹å¯èƒ½è‡ªå·±éƒ½ä¸çŸ¥æ‰€äº‘ã€‚è€Œè¯»å†™æ–¹é¢ï¼Œå› ä¸ºå¯ä»¥å€ŸåŠ©å¤–éƒ¨å·¥å…·æ¥è¾…åŠ©ï¼Œå…¶å®æ•ˆæ€§ä¹Ÿæ²¡æœ‰é‚£ä¹ˆå¼ºï¼Œç•™ç»™å¤§è„‘æ€è€ƒçš„æ—¶é—´å°šä¸”å……è¶³ï¼Œä¸€èˆ¬æ²¡æœ‰å¤ªå¤§çš„é—®é¢˜ï¼Œä½†æ‡‚è¡Œçš„äººä¹Ÿå¯ä»¥ä¸€çœ¼çœ‹å‡ºè¿™æ®µè‹±æ–‡èƒŒåçš„äººçš„èƒ½åŠ›å¦‚ä½•ã€‚(å› ä¸ºä¸€äº›ç”¨æ³•å¹¶ä¸ç®€ä»‹ï¼Œæˆ–è€…ä¹±ç”¨ä»‹è¯â€¦â€¦)</p>
<p>æœ‰å“ªäº›æ–¹é¢éœ€è¦æ€è€ƒï¼š</p>
<p>è¯æ±‡é‡ã€å‘éŸ³&amp;å£éŸ³ã€ä¸ç”¨æ€»è¦ä¸€ç§è¡¨è¾¾æ–¹å¼æˆ–å›ºå®šè¯ç»„ã€æ‰¾åˆ°è‡ªå·±çš„å…´è¶£åˆ‡å…¥ç‚¹å»å­¦ä¹ è‹±è¯­ï¼ˆæ¯”å¦‚é€šè¿‡å–œå¥½çš„æ­Œè‹±æ­Œæ›²ã€ç”µå½±å°è¯ç­‰ï¼‰ã€å›ºå®šåœºæ™¯ç”¨è¯­ï¼ˆæ¯”å¦‚æˆ‘çš„å·¥ä½œä¸­ï¼šç«™ä¼šã€Code Reviewã€Retroâ€¦ï¼‰</p>
<h3 id="æˆ‘çš„å­¦ä¹ èµ„æº"><a href="#æˆ‘çš„å­¦ä¹ èµ„æº" class="headerlink" title="æˆ‘çš„å­¦ä¹ èµ„æº"></a>æˆ‘çš„å­¦ä¹ èµ„æº</h3><p><strong>ä¹¦ç±ç±»</strong></p>
<p><strong>podcastç±»</strong></p>
<p><a href="https://teacherluke.co.uk/" target="_blank" rel="noopener">https://teacherluke.co.uk/</a>  åšä¸»å£éŸ³éå¸¸åœ°é“ï¼Œå‘éŸ³æ¸…æ™°</p>
<p><a href="https://english.stackexchange.com/" target="_blank" rel="noopener">https://english.stackexchange.com/</a>   ç±»ä¼¼<a href="https://stackoverflow.com/çš„é£æ ¼ã€æ¨¡å¼" target="_blank" rel="noopener">https://stackoverflow.com/çš„é£æ ¼ã€æ¨¡å¼</a></p>
<p><a href="https://www.englishclass101.com/" target="_blank" rel="noopener">https://www.englishclass101.com/</a>  é‚®ç®±æ³¨å†Œï¼Œé¢†å–ä¸€äº›å…è´¹çš„è¯¾ç¨‹</p>
<p><a href="https://www.learning-english-onlines.com/5%e5%80%8b%e5%88%9d%e7%b4%9a%e8%8b%b1%e6%96%87%e6%9c%83%e8%a9%b1%e8%aa%b2%e7%a8%8b/" target="_blank" rel="noopener">é€™5å€‹åˆç´šè‹±æ–‡æœƒè©±èª²ç¨‹å¯å¹«æ‚¨æ›´æœ‰è‡ªä¿¡åœ°èªªè‹±èª</a></p>
<p><strong>youtubeåšä¸»</strong></p>
<p>Small talkï¼Œå¼€ä¼šå‰ç»å¸¸éœ€è¦ç­‰äººï¼Œè€Œåœ¨è¿™çŸ­æš‚çš„å‡ åˆ†é’Ÿé‡Œå¦‚ä½•åŒæ–¹éƒ½æ²¡æœ‰è¯é¢˜å°±æ˜¾å¾—æœ‰ç‚¹å„¿å°´å°¬ã€‚èŠä¸€äº›æ—¥å¸¸çš„è¯é¢˜ä¸ä»…å¯ä»¥å¸®åŠ©å¢åŠ åŒæ–¹çš„äº†è§£ï¼Œä¹Ÿå¯ä»¥æå‡å¥½æ„Ÿï¼Œæ‰¾åˆ°ä¸€äº›å…±åŒçš„å…´è¶£çˆ±å¥½ã€‚</p>
<p><a href="https://www.youtube.com/watch?v=WGoIoDuf83o" target="_blank" rel="noopener">https://www.youtube.com/watch?v=WGoIoDuf83o</a></p>
<p>è¶…å¤šå½¢å®¹è¯ï¼Œæ­Œæ›²ç‚¹è¯„ï¼Œ<a href="https://www.youtube.com/watch?v=21lcqYBJQLQ&amp;ab_channel=%E4%B8%8D%E6%98%AF%E6%9F%AF%E6%A1%91%E5%BE%B7" target="_blank" rel="noopener">https://www.youtube.com/watch?v=21lcqYBJQLQ&amp;ab_channel=%E4%B8%8D%E6%98%AF%E6%9F%AF%E6%A1%91%E5%BE%B7</a></p>
<p>ä¸€äº›å®ç”¨çš„ç½‘ç«™</p>
<ol>
<li><a href="https://www.bbc.co.uk/learningenglish/chinese/features/todays-phrase/" target="_blank" rel="noopener">BBCçš„ä»Šæ—¥çŸ­è¯­</a>  (ä¸»è¦æ˜¯ä¸€äº›åœ°é“çš„çŸ­è¯­ï¼Œä¿šè¯­)</li>
<li><a href="https://www.phrasemix.com/examples" target="_blank" rel="noopener">phrasemixçš„english lessons</a> (åœºæ™¯ç”¨è¯­ï¼Œç”¨è‹±è¯­è®²è§£å›ºå®šåœºæ™¯ä¸‹çš„å¯¹è¯ï¼Œå®ç”¨å‹)</li>
<li></li>
</ol>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/English-Note/">English-Note</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-æˆ‘çš„gitå¸¸ç”¨å‘½ä»¤"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/03/24/æˆ‘çš„gitå¸¸ç”¨å‘½ä»¤/"
    >æˆ‘çš„gitå¸¸ç”¨å‘½ä»¤</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2021/03/24/æˆ‘çš„gitå¸¸ç”¨å‘½ä»¤/" class="article-date">
  <time datetime="2021-03-24T06:09:49.000Z" itemprop="datePublished">2021-03-24</time>
</a>  
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>å¿«é€ŸæŸ¥çœ‹æœ€è¿‘çš„commit id,commit message<br><code>git log --oneline</code></p>
<p>å›åˆ°æŸä¸ªcommitç‰ˆæœ¬<br><code>git reset --hard &lt;commit id&gt;</code></p>
<p>æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯ï¼ŒåŒ…å«æœ¬åœ°çš„å’Œè¿œç¨‹çš„<br><code>git branch -a</code></p>
<p>æŸ¥çœ‹æ‰€æœ‰tag<br><code>git tag</code></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tools/">Tools</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Mongodb-çš„ä¸€äº›æ¦‚å¿µ"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/03/04/Mongodb-çš„ä¸€äº›æ¦‚å¿µ/"
    >Mongodb çš„ä¸€äº›æ¦‚å¿µ</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2021/03/04/Mongodb-çš„ä¸€äº›æ¦‚å¿µ/" class="article-date">
  <time datetime="2021-03-04T08:17:38.000Z" itemprop="datePublished">2021-03-04</time>
</a>  
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>åŸºæœ¬æ¦‚å¿µï¼Œè¿˜æ˜¯å¯¹ç…§å¸¸ç”¨çš„å…³ç³»å‹æ•°æ®åº“ï¼Œè¿™æ ·æ›´å®¹æ˜“ç†è§£ä¸€äº›</p>
<p><a href="https://imgtu.com/i/6V7h3n" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2021/03/04/6V7h3n.png" alt="6V7h3n.png"></a></p>
<h3 id="collection"><a href="#collection" class="headerlink" title="collection"></a>collection</h3><p>mongodbæ˜¯é€šè¿‡ä¸€ä¸ªä¸ªcollectionæ¥åšæ•°æ®å­˜å‚¨çš„ï¼Œå¯ä»¥ç±»æ¯”å…³ç³»å‹æ•°æ®åº“çš„è¡¨ã€‚</p>
<h3 id="shard-key-åˆ†ç‰‡é”®"><a href="#shard-key-åˆ†ç‰‡é”®" class="headerlink" title="shard_key (åˆ†ç‰‡é”®)"></a>shard_key (åˆ†ç‰‡é”®)</h3><p>mongodbæ˜¯é€šè¿‡åˆ†ç‰‡é”®æ¥å¯¹collectionè¿›è¡Œåˆ†åŒºçš„ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡åˆ†ç‰‡é”®æ¥å†³å®šä¸€ä¸ªdocumentå¦‚ä½•åˆ†å¸ƒå¼å­˜å…¥collectionä¸­ã€‚åˆ†ç‰‡é”®æ˜¯æ¯ä¸ªå­˜æ”¾åœ¨collectionä¸­çš„documentéƒ½æŒç»­æ‹¥æœ‰çš„ä¸å¯ç¼ºå°‘çš„ä¸€ä¸ªå­—æ®µæˆ–å¤šä¸ªå­—æ®µçš„ç»„åˆã€‚ åˆ†ç‰‡é”®æœ‰ä¸‹é¢å‡ ä¸ªè¦æ±‚ï¼š</p>
<ul>
<li>æ¯ä¸ªdocumentéƒ½å¿…é¡»æ‹¥æœ‰ï¼Œä¸å¯ç¼ºå°‘ã€‚</li>
<li>å·²ç»åˆ†ç‰‡çš„æ•°æ®ï¼Œåˆ†ç‰‡é”®ä¸å¯æ›´æ”¹ã€‚</li>
<li>åˆ†ç‰‡é”®å¿…é¡»åŠ ä¸Šç´¢å¼•ã€‚</li>
<li>åˆ†ç‰‡é”®çš„é€‰æ‹©å¯¹åˆ†ç‰‡çš„æ€§èƒ½ã€æ•ˆç‡å’Œå¯æ‰©å±•æ€§éƒ½æœ‰ç€é‡è¦å½±å“ã€‚åˆ†ç‰‡é”®å’Œç´¢å¼•ä¹Ÿä¼šå½±å“é›†ç¾¤çš„åˆ†ç‰‡ç­–ç•¥ã€‚</li>
</ul>
<p><strong>åˆ†ç‰‡é”®ç´¢å¼•</strong></p>
<p>åˆ†ç‰‡é”®å¿…é¡»æœ‰ç´¢å¼•ï¼Œç´¢å¼•å¯ä»¥æ˜¯åˆ†ç‰‡é”®ä¸Šçš„ç´¢å¼•ï¼Œå½“åˆ†ç‰‡é”®æ˜¯ç´¢å¼•å‰ç¼€æ—¶ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤åˆç´¢å¼•ã€‚ æ³¨æ„ï¼šåˆ†ç‰‡é”®ç´¢å¼•å¿…é¡»æ˜¯æ¨ªå‘(æ­£å‘)ï¼Œæ¯”å¦‚ç”¨idåšç´¢å¼•æ—¶å®šä¹‰ä¸ºkey{id:1} å‚è€ƒï¼š<a href="https://docs.mongodb.com/manual/core/sharding-shard-key/#sharding-shard-key-indexes" target="_blank" rel="noopener">https://docs.mongodb.com/manual/core/sharding-shard-key/#sharding-shard-key-indexes</a></p>
<p>shard keyåœ¨shardingæ­å»ºå®Œæ¯•åæ˜¯ä¸èƒ½ä¿®æ”¹çš„ï¼Œä¸€ä¸ªcollectionä¸Šåªèƒ½æœ‰ä¸€ä¸ªshard keyã€‚<br>shard keyä¸Šå¿…é¡»æœ‰ç´¢å¼•ï¼ˆå¯ä»¥æ˜¯ä»¥shard keyå¼€å¤´çš„è”åˆç´¢å¼•ï¼‰ï¼Œå¦‚æœæ²¡æœ‰mongodbä¼šä¸ºshard keyåˆ›å»ºç´¢å¼•ã€‚å¦‚æœæ˜¯å·²ç»å­˜åœ¨çš„collectioné‚£ä¹ˆå¿…é¡»æ‰‹åŠ¨ä¸ºshard keyåˆ›å»ºç´¢å¼•ã€‚</p>
<p>MongoDB creates a unique index on the _id field during the creation of a collection. The _id index prevents clients from inserting two documents with the same value for the _id field. You cannot drop this index on the _id field.</p>
<p>mongodb offical doc <a href="https://docs.mongodb.com/manual/indexes/" target="_blank" rel="noopener">https://docs.mongodb.com/manual/indexes/</a></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tools/">Tools</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Openshift-E04-Image-Streamæ˜¯ä¸ªå•¥"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/01/31/Openshift-E04-Image-Streamæ˜¯ä¸ªå•¥/"
    >Openshift E04 Image Streamæ˜¯ä¸ªå•¥</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2021/01/31/Openshift-E04-Image-Streamæ˜¯ä¸ªå•¥/" class="article-date">
  <time datetime="2021-01-31T05:23:35.000Z" itemprop="datePublished">2021-01-31</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/CICD/">CICD</a>
  </div>
 
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>Image Stream(ä¸­æ–‡å  é•œåƒæµ) æ˜¯ä¸€ç»„é•œåƒçš„é›†åˆ, OpenShifté»˜è®¤æƒ…å†µä¸‹æä¾›äº†å‡ ä¸ªImage Streamsï¼ŒåŒ…æ‹¬è®¸å¤šæµè¡Œçš„runtimeå’Œframeworksã€‚</p>
<p>Image Streams tag(ä¸­æ–‡å é•œåƒæµæ ‡ç­¾å¯¹è±¡)æ˜¯æŒ‡å‘Image Streamsä¸­çš„imageçš„åˆ«åã€‚é€šå¸¸ç¼©å†™ä¸ºistagã€‚å®ƒåŒ…å«ä¸€ä¸ªimageå†å²è®°å½•ï¼Œè¡¨ç¤ºä¸ºtagæ›¾ç»æŒ‡å‘çš„æ‰€æœ‰imagesçš„å †æ ˆã€‚</p>
<p>(??? image streamå°±æ˜¯ç±»ä¼¼repoçš„æ¦‚å¿µ)</p>
<p>ä¸€ä¸ªé•œåƒæµæ ‡ç­¾å¯¹è±¡ï¼ˆImageStreamTagï¼‰æŒ‡å‘ä¸€ä¸ªé•œåƒï¼Œå¯ä»¥æ˜¯æœ¬åœ°é•œåƒæˆ–è€…è¿œç¨‹é•œåƒã€‚å¦‚ä¸‹çš„åä¸ºâ€œpythonâ€çš„é•œåƒæµåŒ…å«ä¸¤ä¸ªæ ‡ç­¾ï¼Œæ ‡ç­¾34æŒ‡å‘Python v3.4é•œåƒï¼Œæ ‡ç­¾35æŒ‡å‘Pythonv3.5é•œåƒã€‚</p>
<p>å¯¼å…¥Image Stream<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Method 1</span></span><br><span class="line">oc create -f xxx.yaml -n openshift</span><br><span class="line"></span><br><span class="line"><span class="comment"># Method 2</span></span><br><span class="line">oc import-image</span><br></pre></td></tr></table></figure></p>
<p>æŸ¥çœ‹Image Stream<br><code>oc get is -n openshift</code></p>
<p>æŸ¥çœ‹Image Stream Tag</p>
<p><code>oc get istag</code></p>
<p>ä¾‹å­</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker pull ericnie2017/s2i-tomcat:latest</span><br><span class="line"></span><br><span class="line">oc import-image ericnie2017/s2i-tomcat -n openshift --confirm --insecure</span><br><span class="line"></span><br><span class="line">oc get is -n openshift | grep tomcat</span><br></pre></td></tr></table></figure>
<p>Service Catalog ä¸­çœ‹åˆ°çš„ä¸èƒ½ä¸ <code>oc get is</code>  çš„ç»“æœä¸€ä¸€å¯¹åº”ï¼Œåªèƒ½éƒ¨åˆ†å¯¹åº”ã€‚</p>
<p> <a href="https://www.zhihu.com/column/p/31637802" target="_blank" rel="noopener">çŸ¥ä¹-Service CatalogåŠOpenShiftçš„å†å²</a></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/OpenShift/">OpenShift</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Openshift-E03-è°ˆè°ˆS2I"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/01/31/Openshift-E03-è°ˆè°ˆS2I/"
    >Openshift E03 è°ˆè°ˆS2I</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2021/01/31/Openshift-E03-è°ˆè°ˆS2I/" class="article-date">
  <time datetime="2021-01-31T04:27:01.000Z" itemprop="datePublished">2021-01-31</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/CICD/">CICD</a>
  </div>
 
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>  å…³äºOpenShiftï¼Œè‡³ä»Šä¸ºæ­¢è¿˜æ²¡æœ‰æ¢³ç†æ ¸å¿ƒç»„ä»¶å’Œæ¦‚å¿µä¸Šçš„è§£é‡Šï¼Œä½†ä¼¼ä¹å¹¶ä¸å¤ªå¦¨ç¢åˆæ­¥çš„ç®€å•ä½¿ç”¨ã€‚è€Œ Source to Image(S2I) æ˜¯OpenShift çš„ä¸€ä¸ªé‡è¦åŠŸèƒ½ï¼Œä¹Ÿæ˜¯å…¶çš„ä¸€å¤§ç‰¹è‰²ã€‚</p>
<h3 id="What"><a href="#What" class="headerlink" title="What"></a>What</h3><h5 id="ç¬¬ä¸€ï¼šä»OpenShiftçš„è§’åº¦æ¥çœ‹"><a href="#ç¬¬ä¸€ï¼šä»OpenShiftçš„è§’åº¦æ¥çœ‹" class="headerlink" title="ç¬¬ä¸€ï¼šä»OpenShiftçš„è§’åº¦æ¥çœ‹"></a>ç¬¬ä¸€ï¼šä»OpenShiftçš„è§’åº¦æ¥çœ‹</h5><p>  Source to Image(S2I) æ˜¯OopenShiftä¸­åº”ç”¨å®¹å™¨åŒ–çš„ <strong>æ ‡å‡†æµç¨‹</strong>ã€‚</p>
<h5 id="ç¬¬äºŒï¼š-ä»è‡ªèº«å·¥å…·çš„å±æ€§æ¥çœ‹"><a href="#ç¬¬äºŒï¼š-ä»è‡ªèº«å·¥å…·çš„å±æ€§æ¥çœ‹" class="headerlink" title="ç¬¬äºŒï¼š ä»è‡ªèº«å·¥å…·çš„å±æ€§æ¥çœ‹"></a>ç¬¬äºŒï¼š ä»è‡ªèº«å·¥å…·çš„å±æ€§æ¥çœ‹</h5><p>  Source-to-Image (S2I) æ˜¯ä¸€ç§ç”¨äºæ„å»ºå¯é‡å¤ç”Ÿæˆçš„ Docker æ ¼å¼å®¹å™¨é•œåƒçš„å·¥å…·ã€‚</p>
<h3 id="How"><a href="#How" class="headerlink" title="How"></a>How</h3><p>S2I éœ€è¦çš„æœ€åŸºæœ¬çš„è¾“å…¥åªæœ‰ä¸¤ä¸ªï¼š ä¸€ä¸ªæ˜¯æºä»£ç ä»“åº“(Source Code)ï¼›å¦ä¸€ä¸ªæ˜¯Builder Imageï¼ˆä¹Ÿç§°â€œæ„å»ºé•œåƒã€Builderé•œåƒâ€ã€åŸºç¡€é•œåƒã€æ„å»ºå™¨ï¼‰</p>
<p>ä»åº”ç”¨çš„æºä»£ç æ„å»ºå¹¶éƒ¨ç½²ï¼ŒOpenshifté€šè¿‡ä¸€ä¸ªS2Içš„æ„å»ºè¿‡ç¨‹ç¼–è¯‘æ‰“åŒ…å¹¶å®ç°å‘å¸ƒï¼Œå…·ä½“å¯ä»¥å‚è€ƒ<a href="https://www.cnblogs.com/ericnie/p/9677719.html" target="_blank" rel="noopener">è¿™ç¯‡æ–‡ç« </a></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># install s2i tool on MacOS</span></span><br><span class="line">brew install <span class="built_in">source</span>-to-image</span><br><span class="line"></span><br><span class="line"><span class="comment"># s2i create &lt;image name&gt; &lt;destination directory&gt;</span></span><br><span class="line">s2i create s2i-tomcat s2i-tomcat</span><br><span class="line"></span><br><span class="line"><span class="comment"># get dir ,file </span></span><br><span class="line">âœ  s2i-tomcat tree</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ Dockerfile</span><br><span class="line">â”œâ”€â”€ Makefile</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ s2i</span><br><span class="line">â”‚   â””â”€â”€ bin</span><br><span class="line">â”‚       â”œâ”€â”€ assemble</span><br><span class="line">â”‚       â”œâ”€â”€ run</span><br><span class="line">â”‚       â”œâ”€â”€ save-artifacts</span><br><span class="line">â”‚       â””â”€â”€ usage</span><br><span class="line">â””â”€â”€ <span class="built_in">test</span></span><br><span class="line">    â”œâ”€â”€ run</span><br><span class="line">    â””â”€â”€ <span class="built_in">test</span>-app</span><br><span class="line">        â””â”€â”€ index.html</span><br><span class="line"></span><br><span class="line">4 directories, 9 files</span><br></pre></td></tr></table></figure>
<p><a href="https://www.cnblogs.com/ericnie/p/9677719.html" target="_blank" rel="noopener">S2I tomcat é•œåƒå®šåˆ¶æ¡ˆä¾‹</a>ï¼Œæºç å¯è§ <a href="https://github.com/cicd-draft/s2i-tomcat" target="_blank" rel="noopener">https://github.com/cicd-draft/s2i-tomcat</a></p>
<h3 id="OpenShiftçš„æ„å»º"><a href="#OpenShiftçš„æ„å»º" class="headerlink" title="OpenShiftçš„æ„å»º"></a>OpenShiftçš„æ„å»º</h3><p>OpenShiftæ”¯æŒ4ç§æ„å»ºæ–¹å¼ï¼šDockeræ„å»ºã€S2Iæ„å»ºã€Pipelineæ„å»ºå’Œè‡ªå®šä¹‰æ„å»ºã€‚è¯¦æƒ…å¯è§<a href="https://access.redhat.com/documentation/zh-cn/openshift_container_platform/4.2/html-single/builds/index#builds-about_understanding-image-builds" target="_blank" rel="noopener">å®˜æ–¹è¯´æ˜</a></p>
<ul>
<li><p>Dockeræ„å»ºä¼šè°ƒç”¨docker buildå‘½ä»¤ï¼ŒåŸºäºæ‰€æä¾›çš„Dockerfileæ–‡ä»¶å’Œæ‰€æä¾›çš„å†…å®¹æ¥æ„å»ºDockeré•œåƒã€‚</p>
</li>
<li><p>S2Iæ„å»ºæ˜¯OpenShiftçš„åŸåˆ›ï¼Œå®ƒæ ¹æ®æŒ‡å®šçš„æ„å»ºé•œåƒï¼ˆBuilder Imageï¼‰å’Œæºä»£ç ï¼ˆSource Codeï¼‰ï¼Œæ„å»ºç”Ÿæˆå¯éƒ¨ç½²Dockeré•œåƒï¼Œå¹¶æ¨é€åˆ°OpenShiftå†…éƒ¨é›†æˆé•œåƒåº“ä¸­ã€‚</p>
</li>
<li><p>Pipelineæ„å»ºæ–¹å¼å…è®¸å¼€å‘è€…å®šä¹‰Jenkins Pipelineã€‚åœ¨é¡¹ç›®é¦–æ¬¡ä½¿ç”¨è¯¥æ„å»ºæ–¹å¼æ—¶ï¼ŒOpenShiftå®¹å™¨äº‘å¹³å°ä¼šå¯åŠ¨ä¸€ä¸ªJenkinsæœåŠ¡ï¼Œç„¶åå†å°†è¯¥Pipelineäº¤ç”±å®ƒæ¥æ‰§è¡Œï¼Œå¹¶è´Ÿè´£å¯åŠ¨ã€ç›‘æ§å’Œç®¡ç†è¯¥æ„å»ºã€‚BuildConfigå¯¹è±¡ä¸­å¯ä»¥ç›´æ¥åŒ…å«Jenkins Pipelineçš„å†…å®¹ï¼Œæˆ–è€…åŒ…å«å…¶Gitä»“åº“åœ°å€ã€‚</p>
</li>
</ul>
<hr>
<ul>
<li><a href="https://github.com/openshift/source-to-image/blob/master/docs/cli.md" target="_blank" rel="noopener">s2i cli usage</a></li>
<li><a href="https://www.cnblogs.com/ericnie/p/9677719.html" target="_blank" rel="noopener">S2I tomcat é•œåƒå®šåˆ¶</a></li>
<li><a href="https://www.ewhisper.cn/binary-builds-with-openshift.html" target="_blank" rel="noopener">ä½¿ç”¨OpenShiftè¿›è¡ŒäºŒè¿›åˆ¶æ„å»º</a></li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/OpenShift/">OpenShift</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Openshift-E02-éƒ¨ç½²JenkinsæœåŠ¡"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/01/10/Openshift-E02-éƒ¨ç½²JenkinsæœåŠ¡/"
    >Openshift E02 éƒ¨ç½²JenkinsæœåŠ¡</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2021/01/10/Openshift-E02-éƒ¨ç½²JenkinsæœåŠ¡/" class="article-date">
  <time datetime="2021-01-10T08:02:03.000Z" itemprop="datePublished">2021-01-10</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/CICD/">CICD</a>
  </div>
 
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>OpenShift é¡¹ç›®é»˜è®¤æä¾›äº†ä¸¤ä¸ªJenkinséƒ¨ç½²æ¨¡æ¿, Jenkins-ephemeral å’Œ Jenkins-persistent</p>
<ul>
<li><p><strong>Jenkins-ephemeral</strong> æ¨¡æ¿éƒ¨ç½²çš„JenkinsæœåŠ¡çš„æ•°æ®åœ¨å®¹å™¨é€€å‡ºåå°†ä¸¢å¤±ï¼Œé€‚åˆæµ‹è¯•ä½¿ç”¨ï¼›</p>
</li>
<li><p><strong>Jenkins-persistent</strong> æ¨¡æ¿éƒ¨ç½²éœ€è¦æŒä¹…åŒ–å·çš„æ”¯æŒï¼Œå…¶éƒ¨ç½²çš„Jenkins æœåŠ¡çš„æ•°æ®å¯ä»¥è¢«æŒä¹…åŒ–ã€‚</p>
</li>
</ul>
<blockquote>
<p> è¿™é‡Œæœ‰å¾ˆå¤šå®˜æ–¹çš„æ¡ˆä¾‹æºç ï¼š <a href="https://github.com/openshift/origin/tree/v1.3.0/examples" target="_blank" rel="noopener">https://github.com/openshift/origin/tree/v1.3.0/examples</a></p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">oc login -u developer https://192.168.99.109:8443</span><br><span class="line"></span><br><span class="line"><span class="comment"># create a new project, name: ci</span></span><br><span class="line">oc new-project ci</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create a template, </span></span><br><span class="line">oc create -f https://raw.githubusercontent.com/openshift/origin/v1.3.0/examples/jenkins/jenkins-ephemeral-template.json </span><br><span class="line"></span><br><span class="line"><span class="comment"># Get template</span></span><br><span class="line">oc get template</span><br><span class="line">NAME                DESCRIPTION                                       PARAMETERS        OBJECTS</span><br><span class="line">jenkins-ephemeral   Jenkins service, without persistent storage....   6 (1 generated)   6</span><br><span class="line"></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">âœ  ~ oc policy add-role-to-user edit -z default</span><br><span class="line">role <span class="string">"edit"</span> added: <span class="string">"default"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">âœ  ~ oc new-app --template=jenkins-ephemeral --param=JENKINS_PASSWORD=welcome123</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">--&gt; Deploying template &quot;ci/jenkins-ephemeral&quot; to project ci</span><br><span class="line"></span><br><span class="line">     jenkins-ephemeral</span><br><span class="line">     ---------</span><br><span class="line">     Jenkins service, without persistent storage.</span><br><span class="line">     WARNING: Any data stored will be lost upon pod destruction. Only use this template for testing</span><br><span class="line"></span><br><span class="line">     A Jenkins service has been created in your project.  The username/password are admin/welcome.  The tutorial at https://github.com/openshift/origin/blob/master/examples/jenkins/README.md contains more information about using this template.</span><br><span class="line"></span><br><span class="line">     * With parameters:</span><br><span class="line">        * Jenkins Service Name=jenkins</span><br><span class="line">        * Jenkins JNLP Service Name=jenkins-jnlp</span><br><span class="line">        * Jenkins Password=welcome</span><br><span class="line">        * Memory Limit=512Mi</span><br><span class="line">        * Jenkins ImageStream Namespace=openshift</span><br><span class="line">        * Jenkins ImageStreamTag=jenkins:latest</span><br><span class="line"></span><br><span class="line">--&gt; Creating resources ...</span><br><span class="line">    route.route.openshift.io &quot;jenkins&quot; created</span><br><span class="line">    deploymentconfig.apps.openshift.io &quot;jenkins&quot; created</span><br><span class="line">    serviceaccount &quot;jenkins&quot; created</span><br><span class="line">    rolebinding.authorization.openshift.io &quot;jenkins_edit&quot; created</span><br><span class="line">    service &quot;jenkins-jnlp&quot; created</span><br><span class="line">    service &quot;jenkins&quot; created</span><br><span class="line">--&gt; Success</span><br><span class="line">    Access your application via route &apos;jenkins-ci.192.168.99.109.nip.io&apos;</span><br><span class="line">    Run &apos;oc status&apos; to view your app.</span><br></pre></td></tr></table></figure>
<p>éƒ¨ç½²å¤±è´¥äº†ï¼ŒğŸ’”</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">oc delete all -l app=jenkins-ephemeral</span><br><span class="line">pod <span class="string">"jenkins-1-6k7s6"</span> deleted</span><br><span class="line">replicationcontroller <span class="string">"jenkins-1"</span> deleted</span><br><span class="line">service <span class="string">"jenkins"</span> deleted</span><br><span class="line">service <span class="string">"jenkins-jnlp"</span> deleted</span><br><span class="line">deploymentconfig.apps.openshift.io <span class="string">"jenkins"</span> deleted</span><br><span class="line">route.route.openshift.io <span class="string">"jenkins"</span> deleted</span><br></pre></td></tr></table></figure>
<p>ä¸èƒ½åˆ é™¤ serviceaccounts<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">oc delete serviceaccounts -l app=jenkins-ephemeral</span><br><span class="line">oc delete rolebindings.authorization.openshift.io jenkins_edit</span><br></pre></td></tr></table></figure></p>
<p>åˆ é™¤å¹²å‡€åï¼Œå¯ä»¥ç”¨å‘½ä»¤ <code>oc get all -o wide</code> éªŒè¯</p>
<p>å†æ¥ä¸€æ¬¡ </p>
<p><code>oc new-app --template=jenkins-ephemeral --param=JENKINS_PASSWORD=welcome123</code></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/OpenShift/">OpenShift</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Openshift-E01-æœ€å¸¸è§çš„ä½¿ç”¨åœºæ™¯"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/01/10/Openshift-E01-æœ€å¸¸è§çš„ä½¿ç”¨åœºæ™¯/"
    >Openshift E01 æœ€å¸¸è§çš„ä½¿ç”¨åœºæ™¯</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2021/01/10/Openshift-E01-æœ€å¸¸è§çš„ä½¿ç”¨åœºæ™¯/" class="article-date">
  <time datetime="2021-01-10T07:35:25.000Z" itemprop="datePublished">2021-01-10</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/CICD/">CICD</a>
  </div>
 
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>æš‚æ—¶ä¸ä»‹ç» openshift çš„æ¦‚å¿µï¼Œä¹Ÿä¸ä»‹ç»å¦‚ä½•å®‰è£…ã€éƒ¨ç½²ï¼Œå…ˆä½¿ç”¨ä¸€ä¸ªä¾‹å­æ¥çœ‹çœ‹ openshift èƒ½åšä»€ä¹ˆã€‚</p>
<h3 id="æ–°å»ºä¸€ä¸ªé¡¹ç›®"><a href="#æ–°å»ºä¸€ä¸ªé¡¹ç›®" class="headerlink" title="æ–°å»ºä¸€ä¸ªé¡¹ç›®"></a>æ–°å»ºä¸€ä¸ªé¡¹ç›®</h3><p>åœ¨æˆ‘çš„æœ¬åœ°ï¼Œä½¿ç”¨developer/developerç™»é™† OpenShiftæ§åˆ¶å°,å³ä¸Šè§’ç‚¹å‡» <code>+Create Project</code></p>
<ul>
<li>Name -&gt; <code>mybank</code></li>
<li>Display Name -&gt; <code>MyBank</code></li>
<li>Description- &gt; <code>MyBank Application</code></li>
</ul>
<p>æ–°å»ºä¹‹åï¼Œå»åˆ° <code>MyBank</code> project, <code>Overview</code>, <code>Browse Catalog</code>  <code>Wildfly</code>ï¼›è¡¥å……å¦‚ä¸‹æˆªå›¾çš„ä¿¡æ¯</p>
<p><a href="https://imgchr.com/i/slR7a4" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2021/01/10/slR7a4.png" alt="slR7a4.png"></a></p>
<p>Application github repo url: <a href="https://github.com/nichochen/mybank-demo-maven" target="_blank" rel="noopener">https://github.com/nichochen/mybank-demo-maven</a></p>
<p>ç‚¹å‡» <code>Create</code> æŒ‰é’®åï¼ŒOpenShiftå°±ä¼šåˆ›å»ºä¸€ç³»åˆ—çš„åå°å¯¹è±¡ï¼Œè¿›è€Œå‡ºå‘S2Iæµç¨‹ã€‚æ„å»ºçš„è¿‡ç¨‹éœ€è¦è¿æ¥äº’è”ç½‘ä¸‹è½½åº”ç”¨çš„æºä»£ç ã€Mavenæ„å»ºæ‰€éœ€è¦çš„JaråŒ…ä»¥åŠé•œåƒã€‚åœ¨æˆ‘çš„ç”µè„‘ä¸Šcloneåå¤§æ¦‚ç­‰å¾…äº†20minï¼Œç„¶åæ‰ç»§ç»­åé¢çš„æ­¥éª¤ã€‚</p>
<p><a href="https://imgchr.com/i/slIrq0" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2021/01/10/slIrq0.png" alt="slIrq0.png"></a></p>
<p>æˆ‘æœ¬åœ°ä½¿ç”¨minishiftæ­å»ºçš„OpenShiftå®éªŒç¯å¢ƒ</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># login vm</span></span><br><span class="line">minishift ssh</span><br><span class="line"></span><br><span class="line"><span class="comment"># grep the image</span></span><br><span class="line">[docker@minishift ~]<span class="variable">$docker</span> images | grep bank</span><br><span class="line">172.30.1.1:5000/mybank/mybank                            latest              9f9a257dce21        8 minutes ago       961 MB</span><br></pre></td></tr></table></figure>
<p>ä¸€åˆ‡ä¾¿éƒ½ç»“æŸäº†ï¼Œä¸è¦å¤ªçœå¿ƒï½<br><a href="https://imgchr.com/i/slTjbt" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2021/01/10/slTjbt.png" alt="slTjbt.png"></a></p>
<p>å¯ä»¥ç›´æ¥ä»æµè§ˆå™¨è®¿é—®åº”ç”¨ç¨‹åºäº†<br><a href="https://imgchr.com/i/sl7ZV0" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2021/01/10/sl7ZV0.png" alt="sl7ZV0.png"></a></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/OpenShift/">OpenShift</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Excelå¸¸ç”¨å‡½æ•°"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/12/24/Excelå¸¸ç”¨å‡½æ•°/"
    >Excelå¸¸ç”¨å‡½æ•°</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2020/12/24/Excelå¸¸ç”¨å‡½æ•°/" class="article-date">
  <time datetime="2020-12-24T04:40:07.000Z" itemprop="datePublished">2020-12-24</time>
</a>  
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>æŸ¥æ‰¾ä¸€ä¸€å¯¹åº”çš„å…³ç³»</p>
<p><code>=VLOOKUP(F1,configs!$D:$E,2,0)</code>   $ç”¨æ¥ä¿æŒD Eä¸åŠ¨</p>
<p><code>=VLOOKUP(B9,configs!A:B,2,0)</code></p>
<p><code>=MID(K2,1,1)</code>  ä»ç¬¬ä¸€ä½å¼€å§‹ï¼Œå–1ä½</p>
<p><code>=MID(K2,1,3)</code>  ä»ç¬¬ä¸€ä½å¼€å§‹ï¼Œå–3ä½</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tools/">Tools</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/">ä¸Šä¸€é¡µ</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/3/">ä¸‹ä¸€é¡µ</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2019-2023
        <i class="ri-heart-fill heart_icon"></i> John Doe
      </li>
    </ul>
    <ul>
      <li>
        
        
        
        Powered by <a href="https://hexo.io" target="_blank">Hexo</a>
        <span class="division">|</span>
        Theme - <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>Visitors:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>Views:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzzç»Ÿè®¡ -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/palm-tree.svg" alt="Hexo"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">ä¸»é¡µ</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">å½’æ¡£</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">åˆ†ç±»</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">æ ‡ç­¾</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2020/03/16/about">å…³äºæˆ‘</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>è¯·æˆ‘å–æ¯å’–å•¡å§~</p>
  <div class="reward-box">
    
    
  </div>
</div>
    <script src="/js/jquery-2.0.3.min.js"></script> <script src="/js/lazyload.min.js"></script>
<!-- Tocbot -->

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>
<script src="/dist/main.js"></script>
<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // sliderå±•å¼€çŠ¶æ€
                // todo: è¿™æ ·ä¸å¥½ï¼Œåé¢æ”¹æˆçŠ¶æ€
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // è·å¾—åŸå›¾å°ºå¯¸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 <script src="/js/busuanzi-2.3.pure.min.js"></script> 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 <link rel="stylesheet" href="/css/clipboard.css"> <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // ç­‰å¾…ä¸¤ç§’é’Ÿåæ¢å¤
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // ç­‰å¾…ä¸¤ç§’é’Ÿåæ¢å¤
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
  </div>
</body>

</html>