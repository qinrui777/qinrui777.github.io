<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
    
  <meta name="description" content="请拍砖～～～" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     一笑皆春
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <link rel="stylesheet" href="/css/main.css">
  
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
  
  

  

</head>

</html>

<body>
  <div id="app">
    <main class="content">
      
<section class="cover">
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover2.jpg" alt="image frame">
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">一笑皆春</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>

<div id="main">
  <section class="outer">
  <article class="articles">
    
    
    
    
    <article id="post-Azure-FAQs" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/12/11/Azure-FAQs/">Azure FAQs</a>
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/12/11/Azure-FAQs/" class="article-date">
  <time datetime="2019-12-11T09:14:59.000Z" itemprop="datePublished">2019-12-11</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Cloud/">Cloud</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h3 id="1-asm-arm"><a href="#1-asm-arm" class="headerlink" title="1. asm, arm"></a>1. asm, arm</h3><ul>
<li>asm: Azure Service Manager</li>
<li>arm: Azure Resource Manager</li>
</ul>
<p>最开始一直都是classic模型，它的模型中有service的概念，所以它也叫 asm（Azure Service Manager）。2014年开始提出arm（Azure Resource Manager），其管理平台叫portal。2015年底arm发布。</p>
<p>当前情况是微软正在将azure的所有功能往arm上迁移。以后都推荐使用arm。但 是当前状况是arm不完全向后兼容asm，有些功能只有asm上才有，所以还有很多 用户还是在使用classic。</p>
<blockquote>
<p>ref: <a href="https://pengpengxp.github.io/archive/before-2018-11-10/2017-06-28-Azure%E7%BB%8F%E5%85%B8%E6%A8%A1%E5%BC%8F%E5%92%8C%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%8C%BA%E5%88%AB.html#orgbb66971" target="_blank" rel="noopener">https://pengpengxp.github.io/archive/before-2018-11-10/2017-06-28-Azure%E7%BB%8F%E5%85%B8%E6%A8%A1%E5%BC%8F%E5%92%8C%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%8C%BA%E5%88%AB.html#orgbb66971</a></p>
</blockquote>
<h3 id="2-AWS-to-Azure-services-comparison"><a href="#2-AWS-to-Azure-services-comparison" class="headerlink" title="2. AWS to Azure services comparison"></a>2. AWS to Azure services comparison</h3><p>详见链接 <a href="https://docs.microsoft.com/en-us/azure/architecture/aws-professional/services" target="_blank" rel="noopener">https://docs.microsoft.com/en-us/azure/architecture/aws-professional/services</a></p>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Azure-tutorial-02-Storage" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/12/11/Azure-tutorial-02-Storage/">Azure tutorial 02: Storage</a>
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/12/11/Azure-tutorial-02-Storage/" class="article-date">
  <time datetime="2019-12-11T01:54:12.000Z" itemprop="datePublished">2019-12-11</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Cloud/">Cloud</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <p>storage account type<br><a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-account-overview" target="_blank" rel="noopener">https://docs.microsoft.com/en-us/azure/storage/common/storage-account-overview</a></p>
<p><strong>Blob</strong> - Binary Large Object<br><strong>Binary Object</strong> - Images,Documents,Media Files, Log Files, Backup data Virtual Disks</p>
<p><strong>Blod types:</strong> </p>
<ul>
<li>Block Blob - Text and binary data Files</li>
<li>Append Blobs - Optimized for append operations</li>
<li>Page Blob - A collection of 512 byte pages optimized for random read and writes(virtual disk)</li>
</ul>
<p><strong>Locations and Redundancy:</strong> </p>
<ul>
<li>Locally-redundant storage (LRS): A simple, low-cost replication strategy. Data is replicated synchronously three times within the primary region.</li>
<li>Zone-redundant storage (ZRS): Replication for scenarios requiring high availability. Data is replicated synchronously across three Azure availability zones in the primary region.</li>
<li>Geo-redundant storage (GRS): Cross-regional replication to protect against regional outages. Data is replicated synchronously three times in the primary region, then replicated asynchronously to the secondary region. For read access to data in the secondary region, enable read-access geo-redundant storage (RA-GRS).</li>
<li>Geo-zone-redundant storage (GZRS) (preview): Replication for scenarios requiring both high availability and maximum durability. Data is replicated synchronously across three Azure availability zones in the primary region, then replicated asynchronously to the secondary region. For read access to data in the secondary region, enable read-access geo-zone-redundant storage (RA-GZRS).</li>
</ul>
<p><strong>Access Tiers:</strong></p>
<ul>
<li>Hot </li>
<li>Cool </li>
<li>Archive</li>
</ul>
<p><strong>Azure Storage services:</strong></p>
<ul>
<li>Blob service</li>
<li>File service</li>
<li>Queue service</li>
<li>Table Storage</li>
</ul>
<p><strong>Securing Storage Accounts:</strong></p>
<ul>
<li>Access Keys -Two per storage account,full access</li>
<li>Share Access Signatures - Time based access keys that give granular control</li>
</ul>
<p><strong>作业：新建storage account ,并上传文件或文件夹到</strong></p>
<p>create顺序:<br>a subscriptions -&gt;  a storage account -&gt; a SAS token   </p>
<p>除了从azure portal页面操作之外，还提供以下两种方式</p>
<ul>
<li>Azure Storage Explorer - <a href="https://azure.microsoft.com/en-us/features/storage-explorer/" target="_blank" rel="noopener">install tutorial</a><blockquote>
<p>或者浏览器中直接打开链接<a href="https://go.microsoft.com/fwlink/?LinkId=708342&amp;clcid=0x409，会自动下载" target="_blank" rel="noopener">https://go.microsoft.com/fwlink/?LinkId=708342&amp;clcid=0x409，会自动下载</a></p>
</blockquote>
</li>
</ul>
<p>打开 Azure Storage Explorer， 通过xx链接storage<br><img src="/images/azure_storage_01.png" width="80%" height="80%"></p>
<p><img src="/images/azure_storage_02.png" width="80%" height="80%"></p>
<ul>
<li>azcopy - <a href="https://docs.microsoft.com/zh-cn/azure/storage/common/storage-use-azcopy-v10?WT.mc_id=thomasmaurer-blog-thmaure" target="_blank" rel="noopener">install tutorial</a></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#mac os terminal</span></span><br><span class="line">azcopy cp <span class="string">"/Users/xxx/Desktop/testdir/hello_azure.txt"</span> <span class="string">"https://storage873375.blob.core.windows.net/container1/?[?sv=2019-02-02&amp;ss=bfqt&amp;srt=sco&amp;sp=rwdlacup&amp;se=2019-12-11T11:40:09Z&amp;st=2019-12-11T03:40:09Z&amp;spr=https&amp;sig=5%2FFHo4%2BBwxDB6wLftyB7%2FSF7gqnhaEmpFa4nheBOXQg%3D]"</span></span><br></pre></td></tr></table></figure>
<p>报错,原始是 <code>？</code> 后边格式的问题</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#mac os terminal</span></span><br><span class="line">azcopy cp <span class="string">"/Users/xxx/Desktop/testdir/hello_azure.txt"</span>  <span class="string">"https://storage873375.blob.core.windows.net/container1/newdir/?sv=2019-02-02&amp;ss=bfqt&amp;srt=sco&amp;sp=rwdlacup&amp;se=2019-12-11T11:40:09Z&amp;st=2019-12-11T03:40:09Z&amp;spr=https&amp;sig=5%2FFHo4%2BBwxDB6wLftyB7%2FSF7gqnhaEmpFa4nheBOXQg%3D"</span></span><br></pre></td></tr></table></figure>
<p><a href="https://docs.microsoft.com/en-us/rest/api/storageservices/understanding-block-blobs--append-blobs--and-page-blobs" target="_blank" rel="noopener">https://docs.microsoft.com/en-us/rest/api/storageservices/understanding-block-blobs--append-blobs--and-page-blobs</a></p>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Azure-tutorial-01-overview" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/12/11/Azure-tutorial-01-overview/">Azure tutorial 01: overview</a>
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/12/11/Azure-tutorial-01-overview/" class="article-date">
  <time datetime="2019-12-11T01:53:50.000Z" itemprop="datePublished">2019-12-11</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Cloud/">Cloud</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      
      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-youtube-推荐频道-Non-tech" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/12/10/youtube-推荐频道-Non-tech/">youtube 推荐频道(Non-tech)</a>
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/12/10/youtube-推荐频道-Non-tech/" class="article-date">
  <time datetime="2019-12-10T01:47:53.000Z" itemprop="datePublished">2019-12-10</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <p>自从到新公司有梯子后，外出运动的时间变少了，都奉献给了youtube.有些节目被查水表了，<strong>“此帐户已被终止，因为我们收到多份第三方提交的关于该用户发布的内容侵犯版权的声明。”</strong> 所以也不能保证下面罗列的节目在未来可以持续观看</p>
<table>
<thead>
<tr>
<th style="text-align:left">频道</th>
<th style="text-align:left">关键字</th>
<th style="text-align:left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">梦觉教游泳</td>
<td style="text-align:left">postman,测试</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">一本好书</td>
<td style="text-align:left">devops,terraform</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">越哥说电影</td>
<td style="text-align:left">电影解读</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">树根朽木</td>
<td style="text-align:left">电影解读</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">宇哥讲电影</td>
<td style="text-align:left">电影、剧集解读</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">看电影了没</td>
<td style="text-align:left">电影</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">盗月社食遇记</td>
<td style="text-align:left">美食</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">回形针PaperClip</td>
<td style="text-align:left">科普</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">5分鐘DIY</td>
<td style="text-align:left">生活小技巧</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">四季萌芽</td>
<td style="text-align:left">火影</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">深夜讀書</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">PAPAYA 電腦教室</td>
<td style="text-align:left">office三件套</td>
</tr>
</tbody>
</table>
<p><a href="https://www.devops-tech.cn/2019/05/22/Small-Tools-1-youtube-dl/" target="_blank" rel="noopener">如何下载</a>youtube视频、音频</p>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Q-List/">Q List</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-youtube-推荐频道-Tech" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/12/10/youtube-推荐频道-Tech/">youtube 推荐频道(Tech)</a>
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/12/10/youtube-推荐频道-Tech/" class="article-date">
  <time datetime="2019-12-10T01:47:35.000Z" itemprop="datePublished">2019-12-10</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <ul>
<li>Valentin Despa postman、 测试</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">频道</th>
<th style="text-align:left">关键字</th>
<th style="text-align:left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Valentin Despa</td>
<td style="text-align:left">postman,测试</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">Nebulaworks</td>
<td style="text-align:left">devops,terraform</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">tutoriaLinux</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p><a href="https://www.devops-tech.cn/2019/05/22/Small-Tools-1-youtube-dl/" target="_blank" rel="noopener">如何下载</a>youtube视频、音频</p>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Q-List/">Q List</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Terraform-terraform-console" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/12/05/Terraform-terraform-console/">Terraform : terraform console</a>
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/12/05/Terraform-terraform-console/" class="article-date">
  <time datetime="2019-12-05T03:19:42.000Z" itemprop="datePublished">2019-12-05</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Terraform/">Terraform</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h5 id="1-evaluating-expressions"><a href="#1-evaluating-expressions" class="headerlink" title="1.evaluating expressions"></a>1.evaluating expressions</h5><p>The terraform console command provides an interactive console for evaluating expressions.</p>
<p>For example:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># interactive console</span></span><br><span class="line">➜ terraform console</span><br><span class="line">&gt; element(list(<span class="string">"one"</span>,<span class="string">"two"</span>,<span class="string">"three"</span>),1)</span><br><span class="line">two</span><br><span class="line"></span><br><span class="line"><span class="comment"># non-interactive scripts</span></span><br><span class="line">➜ <span class="built_in">echo</span> <span class="string">"list("</span>1<span class="string">","</span>2<span class="string">")"</span> | terraform console</span><br><span class="line">[</span><br><span class="line">  1,</span><br><span class="line">  2,</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<p>or</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">➜ terraform console</span><br><span class="line">&gt; aws_instance_demo.public_ip</span><br><span class="line">54.152.62.34</span><br></pre></td></tr></table></figure>
<h5 id="2-test-Terraform-built-in-functions-locally"><a href="#2-test-Terraform-built-in-functions-locally" class="headerlink" title="2.test Terraform built-in functions locally"></a>2.test Terraform built-in functions locally</h5><p>  <a href="http://artemstar.com/2018/03/03/terraform-test-functions/" target="_blank" rel="noopener">test Terraform built-in functions locally</a></p>
<hr>
<p>More ref:<br><a href="https://www.terraform.io/docs/commands/console.html" target="_blank" rel="noopener">https://www.terraform.io/docs/commands/console.html</a><br><a href="http://artemstar.com/2018/03/03/terraform-test-functions/" target="_blank" rel="noopener">http://artemstar.com/2018/03/03/terraform-test-functions/</a></p>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Terraform/">Terraform</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Anka-tutorial-03-jenkins" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/11/28/Anka-tutorial-03-jenkins/">Anka tutorial 03: jenkins</a>
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/11/28/Anka-tutorial-03-jenkins/" class="article-date">
  <time datetime="2019-11-28T03:02:20.000Z" itemprop="datePublished">2019-11-28</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/CICD/">CICD</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h3 id="anka-集成-Jenkins-link"><a href="#anka-集成-Jenkins-link" class="headerlink" title="anka 集成 Jenkins (link)"></a>anka 集成 Jenkins <a href="https://ankadoc.bitbucket.io/anka-build/#integrate-jenkins-with-controller" target="_blank" rel="noopener">(link)</a></h3><p>未完待续…</p>
<p>安装插件<br><code>Manage Jenkins &gt; Manage Plugins</code></p>
<p>搜索anka</p>
<p>新建 ssh 用的登陆凭证</p>
<p>新建VM的时候 默认用户名和密码分别是 <code>anka/admin</code></p>
<p>配置jenkins<br><code>Manage Jenkins &gt; Configure System</code></p>
<p><img src="/images/anka_jenkins_01.png" width="80%" height="80%"></p>
<p><a href="http://localhost/#/dashboard" target="_blank" rel="noopener">http://localhost/#/dashboard</a></p>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Import-P12-file-on-Mac-OS-X-with-CLI" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/11/22/Import-P12-file-on-Mac-OS-X-with-CLI/">Import P12 file on Mac OS X with CLI</a>
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/11/22/Import-P12-file-on-Mac-OS-X-with-CLI/" class="article-date">
  <time datetime="2019-11-22T03:38:40.000Z" itemprop="datePublished">2019-11-22</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h3 id="目的：通过命令行倒入p12证书"><a href="#目的：通过命令行倒入p12证书" class="headerlink" title="目的：通过命令行倒入p12证书"></a>目的：通过命令行倒入p12证书</h3><p>Apple为了安全，在ssh登录时，是不允许读取Keychains（钥匙串）的，所以 <strong>security unlock-keychain</strong> 这行命令就很重要了。比如在Pipeline构建打包前，先解锁Keychains。</p>
<h4 id="1-解锁"><a href="#1-解锁" class="headerlink" title="1.解锁"></a>1.解锁</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#方式一： 命令行中不含密码，交互方式</span></span><br><span class="line">➜   security unlock-keychain /Users/&lt;Your_Name&gt;/Library/Keychains/login.keychain-db</span><br><span class="line">password to unlock /Users/&lt;Your_Name&gt;/Library/Keychains/login.keychain-db:</span><br><span class="line"></span><br><span class="line"><span class="comment">#或者命令行中包含密码的方式</span></span><br><span class="line">➜   security unlock-keychain -p &lt;Mac_Login_PWD&gt; /Users/&lt;Your_Name&gt;/Library/Keychains/login.keychain-db</span><br><span class="line">➜   security list-keychains -s /Users/&lt;Your_Name&gt;/Library/Keychains/login.keychain-db</span><br></pre></td></tr></table></figure>
<h4 id="2-导入"><a href="#2-导入" class="headerlink" title="2.导入"></a>2.导入</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#方式一： 命令行中不含密码，交互方式</span></span><br><span class="line"><span class="comment">#会有弹窗，提示输入 P12文件的密码</span></span><br><span class="line">➜   security import ~/Desktop/xxx.p12 -k /Users/&lt;Your_Name&gt;/Library/Keychains/login.keychain-db</span><br><span class="line">1 identity imported.</span><br><span class="line"><span class="comment">#或者命令行中包含密码的方式</span></span><br><span class="line">➜   security import ~/&lt;Your_Path&gt;/xxx.p12 -k /Users/&lt;Your_Name&gt;/Library/Keychains/login.keychain-db -P &lt;P12_Password&gt;</span><br><span class="line">1 identity imported.</span><br></pre></td></tr></table></figure>
<h4 id="3-其他"><a href="#3-其他" class="headerlink" title="3.其他"></a>3.其他</h4><p>删除<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##先展示证书，获取SHA1值; -p 可指定类型</span></span><br><span class="line">security find-identity -p codesigning /Users/&lt;Your_Name&gt;/Library/Keychains/login.keychain-db</span><br><span class="line"><span class="comment">##根据SHA1值删除对应的证书</span></span><br><span class="line">security delete-certificate -Z &lt;Your_SHA1&gt;</span><br></pre></td></tr></table></figure></p>
<p>更过 security 用法，查看 <code>security --help</code> 、<code>security find-identity --help</code></p>
<hr>
<p>More ref:<br><a href="https://www.cnblogs.com/pixy/p/4817579.html" target="_blank" rel="noopener">https://www.cnblogs.com/pixy/p/4817579.html</a></p>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tools/">Tools</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Anka-tutorial-xx-Upgrade-Record" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/11/21/Anka-tutorial-xx-Upgrade-Record/">Anka tutorial xx: Upgrade Record</a>
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/11/21/Anka-tutorial-xx-Upgrade-Record/" class="article-date">
  <time datetime="2019-11-21T05:08:03.000Z" itemprop="datePublished">2019-11-21</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/CICD/">CICD</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h3 id="1-升级前"><a href="#1-升级前" class="headerlink" title="1.升级前"></a>1.升级前</h3><p>从2018年11月到如今2019年11月，已经使用现有的版本1年多；anka也经历了多个版本，此次升级算是跨度较大，升级到目前最新的版本1.5.0</p>
<h4 id="1-1-节点信息"><a href="#1-1-节点信息" class="headerlink" title="1.1 节点信息"></a>1.1 节点信息</h4><table>
<thead>
<tr>
<th style="text-align:left">hostname (节点名称)</th>
<th style="text-align:left">IP</th>
<th style="text-align:left">OS</th>
<th>组件</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">node1</td>
<td style="text-align:left">192.168.55.xx</td>
<td style="text-align:left">linux</td>
<td>anka-controller、anka-registry、etcd、beanstalk、 jenkins、sonarqube</td>
</tr>
<tr>
<td style="text-align:left">node2</td>
<td style="text-align:left">192.168.22.xx</td>
<td style="text-align:left">mac OS</td>
<td>anka build</td>
</tr>
</tbody>
</table>
<h4 id="1-2-节点组件版本信息"><a href="#1-2-节点组件版本信息" class="headerlink" title="1.2 节点组件版本信息"></a>1.2 节点组件版本信息</h4><table>
<thead>
<tr>
<th style="text-align:left">Name</th>
<th style="text-align:left">Current Ver</th>
<th style="text-align:left">Upgrade to Ver</th>
<th style="text-align:left">Note</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">anka-controller</td>
<td style="text-align:left">1.0.14-e7cc50b</td>
<td style="text-align:left">1.5.0-ca87f665</td>
<td style="text-align:left">自制image</td>
</tr>
<tr>
<td style="text-align:left">etcd</td>
<td style="text-align:left">quay.io/coreos/etcd:v3.1.6</td>
<td style="text-align:left">N/A</td>
<td style="text-align:left"><a href="https://quay.io/repository/coreos/etcd?tab=tags" target="_blank" rel="noopener">https://quay.io/repository/coreos/etcd?tab=tags</a>, 新版本需要 自制image</td>
</tr>
<tr>
<td style="text-align:left">beanstalk</td>
<td style="text-align:left">schickling/beanstalkd</td>
<td style="text-align:left">N/A</td>
<td style="text-align:left">新版本可不使用</td>
</tr>
<tr>
<td style="text-align:left">anka-registry</td>
<td style="text-align:left">same as controller</td>
<td style="text-align:left">1.5.0-ca87f665</td>
<td style="text-align:left">自制image</td>
</tr>
<tr>
<td style="text-align:left">Anka Build</td>
<td style="text-align:left">1.4.3</td>
<td style="text-align:left">2.1.2</td>
<td style="text-align:left">N/A</td>
</tr>
</tbody>
</table>
<h4 id="1-2-组件端口变更信息"><a href="#1-2-组件端口变更信息" class="headerlink" title="1.2 组件端口变更信息"></a>1.2 组件端口变更信息</h4><table>
<thead>
<tr>
<th style="text-align:left">组件</th>
<th style="text-align:center">升级前端口</th>
<th style="text-align:center">升级后端口</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">anka-controller</td>
<td style="text-align:center">8090</td>
<td style="text-align:center">80</td>
</tr>
<tr>
<td style="text-align:left">anka-registry</td>
<td style="text-align:center">80</td>
<td style="text-align:center">8089</td>
</tr>
</tbody>
</table>
<p>根据节点的OS，提前下载安装包及相关文件 <a href="https://veertu.com/download-anka-build/" target="_blank" rel="noopener">Anka Build Download page</a></p>
<p><img src="/images/anka_upgrade_install_01.png" width="75%" height="75%"></p>
<h3 id="2-升级步骤"><a href="#2-升级步骤" class="headerlink" title="2. 升级步骤"></a>2. 升级步骤</h3><p>官网升级步骤链接： <a href="https://ankadoc.bitbucket.io/#upgrade-steps" target="_blank" rel="noopener">https://ankadoc.bitbucket.io/#upgrade-steps</a>, 但是不够详细</p>
<h4 id="2-1-On-the-mac-nodes-run-sudo-ankacluster-disjoin"><a href="#2-1-On-the-mac-nodes-run-sudo-ankacluster-disjoin" class="headerlink" title="2.1) On the mac nodes - run sudo ankacluster disjoin."></a>2.1) On the mac nodes - run sudo ankacluster disjoin.</h4><p>在 <strong>node 2</strong> 上操作<br><code>node2 $ sudo ankacluster disjoin -g</code></p>
<h4 id="2-2-Install-the-new-anka-pkg-on-all-the-mac-nodes"><a href="#2-2-Install-the-new-anka-pkg-on-all-the-mac-nodes" class="headerlink" title="2.2) Install the new anka pkg on all the mac nodes."></a>2.2) Install the new anka pkg on all the mac nodes.</h4><p>在 <strong>node 2</strong> 上操作, 找到安装包,双击安装即可</p>
<h4 id="2-3-Upgrade-the-guest-addons-inside-the-VM-templates-with-anka-start-u-Check-the-upgrade-notes-to-see-if-this-step-is-necessary"><a href="#2-3-Upgrade-the-guest-addons-inside-the-VM-templates-with-anka-start-u-Check-the-upgrade-notes-to-see-if-this-step-is-necessary" class="headerlink" title="2.3) Upgrade the guest addons inside the VM templates with anka start -u. Check the upgrade notes to see if this step is necessary."></a>2.3) Upgrade the guest addons inside the VM templates with anka start -u. Check the upgrade notes to see if this step is necessary.</h4><p>在 <strong>node 2</strong> 上操作<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#先切换到root用户，方便操作</span></span><br><span class="line"><span class="comment">#这个命令执行后会等待3min左右</span></span><br><span class="line">node2:~ root<span class="comment"># anka stop -f &lt;VM_NAME&gt;</span></span><br><span class="line">node2:~ root<span class="comment"># anka start -u &lt;VM_NAME&gt;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="2-4-Push-the-newly-upgraded-VM-templates-to-registry-with-anka-registry-push-vmname-–tag"><a href="#2-4-Push-the-newly-upgraded-VM-templates-to-registry-with-anka-registry-push-vmname-–tag" class="headerlink" title="2.4) Push the newly upgraded VM templates to registry with anka registry push vmname –tag."></a>2.4) Push the newly upgraded VM templates to registry with anka registry push vmname –tag.</h4><p>在 <strong>node 2</strong> 上操作<br><code>node2:~ root# anka registry push &lt;VM_NAME&gt; -d &#39;&lt;Message&gt;&#39; -t v100</code></p>
<h4 id="2-5-Go-to-the-Controller-Registry-and-upgrade"><a href="#2-5-Go-to-the-Controller-Registry-and-upgrade" class="headerlink" title="2.5) Go to the Controller/Registry and upgrade."></a>2.5) Go to the Controller/Registry and upgrade.</h4><p>在 <strong>node 1</strong> 上操作 ，之前的启动方式是docker-compose,根据yaml文件启动</p>
<p>anka 经过一年的开发升级，这块变动较大，比如：</p>
<ul>
<li><ol>
<li>beanstalk 可以不使用了 <em>(starting from anka version 2.0 beanstalk is not required, please configure the controller with the configuration that doesn’t use beanstalk)</em></li>
</ol>
</li>
<li><ol start="2">
<li>端口的变化</li>
</ol>
</li>
<li><ol start="3">
<li>etcd由之前的 quay.io/coreos/etcd 镜像改为自己制作</li>
</ol>
</li>
</ul>
<p>提前备份 docker-compose.yml;先将下载包解压，结合老版本的docker-compose.yml文件，替换 <code>services/</code> 目录下的相关文件<br><img src="/images/anka_1.5.x_package.png" width="60%" height="60%"></p>
<p><strong>注意事项</strong>: </p>
<pre><code>- etcd、registry 挂载的文件目录不可变动，不然影响旧的数据正常读取
- 替换docker-compose.yml的一些值
</code></pre><h4 id="2-6-On-the-mac-nodes-run-sudo-ankacluster-join"><a href="#2-6-On-the-mac-nodes-run-sudo-ankacluster-join" class="headerlink" title="2.6) On the mac nodes - run sudo ankacluster join."></a>2.6) On the mac nodes - run sudo ankacluster join.</h4><p>在 <strong>node 2</strong> 上操作<br><code>ankacluster join -g -n mac-mini-01 http://controller.anka.intranet.in2e.com:80</code></p>
<blockquote>
<p>以上是官网提及的，但是与jenkins 集成中还需要更多的操作，以下作为补充</p>
</blockquote>
<h4 id="2-7-Change-jenkins-configuration"><a href="#2-7-Change-jenkins-configuration" class="headerlink" title="2.7) Change jenkins configuration."></a>2.7) Change jenkins configuration.</h4><ul>
<li><p>2.7.1 修改controller地址<br><img src="/images/anka_jenkins_config_1.png" width="100%" height="100%"></p>
</li>
<li><p>2.7.2 修改 anka  VM templates<br>升级后，测试发现 jenkins 日志中找不到vm templates;需要重新配置 VM templates<br><img src="/images/anka_jenkins_vm_template.png" width="100%" height="100%"></p>
</li>
</ul>
<h5 id="2-8-Change-registry"><a href="#2-8-Change-registry" class="headerlink" title="2.8) Change registry"></a>2.8) Change registry</h5><blockquote>
<p>升级后一天，再更新一个VM template时遇到问题  </p>
</blockquote>
<p><strong>发现问题：</strong><br>报错如下, 根据提示修改了多次命令的格式，但还是没有作用<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">anka registry push &lt;VM_NAME&gt; -d <span class="string">'update new cert'</span> -t v28</span><br><span class="line">-anka: Extra data: line 1 column 5 - line 2 column 1 (char 4 - 19)</span><br></pre></td></tr></table></figure></p>
<p><strong>思考问题：</strong><br>在root用户下 使用 <code>anka registry list</code> 时发现也报错，于是怀疑是 registry 的问题；由于端口的变更，导致 anka push VM 会有问题；需要删除，重新添加</p>
<p><strong>尝试解决问题：</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先查看repo</span></span><br><span class="line">node2:~ root<span class="comment"># anka registry list-repos</span></span><br><span class="line">++</span><br><span class="line">++</span><br><span class="line">anka (default)</span><br><span class="line">+--------+-----------------------------------+</span><br><span class="line">| host   | controller.anka.intranet.xxx.com |</span><br><span class="line">+--------+-----------------------------------+</span><br><span class="line">| scheme | http                              |</span><br><span class="line">+--------+-----------------------------------+</span><br><span class="line"><span class="comment">#删除</span></span><br><span class="line">node2:~ root<span class="comment"># anka registry delete anka</span></span><br><span class="line"><span class="comment">#新增</span></span><br><span class="line">node2:~ root<span class="comment"># anka registry add anka-repo http://192.168.55.xx:8089</span></span><br><span class="line"><span class="comment">#再次list,查看以下</span></span><br><span class="line">node2:~ root<span class="comment"># anka registry list-repos</span></span><br><span class="line">++</span><br><span class="line">++</span><br><span class="line">anka-repo (default)</span><br><span class="line">+--------+---------------+</span><br><span class="line">| host   | 192.168.55.xx |</span><br><span class="line">+--------+---------------+</span><br><span class="line">| scheme | http          |</span><br><span class="line">+--------+---------------+</span><br><span class="line">| port   | 8089          |</span><br><span class="line">+--------+---------------+</span><br></pre></td></tr></table></figure></p>
<p>一波操作后，终于可以正常 push VM, ～～～大坑</p>
<hr>
<p><strong>最后 —-&gt;记得修改Node上的 VM capacity</strong><br>每次disjoin -&gt; join 动作，这个值都会回到默认值 2;或者执行 <code>ankacluster join</code> 的时候可以用 <code>-m</code> 参数去指定<br>这个值的作用是，指定允许同时运行几个 mac OS 实例</p>
<p><img src="/images/anka_vm_capacity.png" width="90%" height="90%"></p>
<blockquote>
<p>主要记录 2019-11-20 左右升级 anka 的操作</p>
</blockquote>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Anka-tutorial-02" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/11/19/Anka-tutorial-02/">Anka tutorial 02</a>
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/11/19/Anka-tutorial-02/" class="article-date">
  <time datetime="2019-11-19T07:38:10.000Z" itemprop="datePublished">2019-11-19</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/CICD/">CICD</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h5 id="1-Joining-Nodes"><a href="#1-Joining-Nodes" class="headerlink" title="1.Joining Nodes"></a>1.Joining Nodes</h5><p>在mac上（anka build 节点）执行  <code>sudo ankacluster join http://localhost:80/</code></p>
<p>output:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ sudo ankacluster join http://localhost:80/ -n demo-mac</span><br><span class="line">Setting tls config</span><br><span class="line">Testing connection to controller...: Ok</span><br><span class="line">Testing connection to the registry...: Ok</span><br><span class="line">Ok</span><br><span class="line">Cluster join success</span><br></pre></td></tr></table></figure></p>
<p>去页面 <em><a href="http://localhost/#/nodes" target="_blank" rel="noopener">http://localhost/#/nodes</a></em> 查看<br><img src="/images/anka_controller_node.png"></p>
<h5 id="2-Create-VM-link"><a href="#2-Create-VM-link" class="headerlink" title="2. Create VM (link)"></a>2. Create VM <a href="https://ankadoc.bitbucket.io/anka-build/#create-vm" target="_blank" rel="noopener">(link)</a></h5><p>先下载mac OS安装包 (安装包7G多，需要提前下载)<br><a href="https://www.macworld.co.uk/how-to/mac-software/download-old-os-x-3629363/#el%20cap" target="_blank" rel="noopener">https://www.macworld.co.uk/how-to/mac-software/download-old-os-x-3629363/#el%20cap</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ anka create --ram-size 4G --cpu-count 2 --disk-size 40G --app /Applications/Install\ macOS\ Catalina.app CatalinaVm</span><br><span class="line">Installing macOS 10.15.1...</span><br><span class="line">Preparing target disk...</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Note For Catalina Anka VMs, –ram-size value should be 4G and –disk-size should be 80G.<br>由于电脑空间不够了，于是报错了</p>
</blockquote>
<p>清理电脑空间后，再来一次，大约 30min<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ anka create --ram-size 4G --cpu-count 2 --disk-size 80G --app /Applications/Install\ macOS\ Catalina.app  CatalinaVm</span><br><span class="line">Installing macOS 10.15.1...</span><br><span class="line">Preparing target disk...</span><br><span class="line">Installing addons...</span><br><span class="line">Converting to ANKA format...</span><br><span class="line">Waiting <span class="keyword">for</span> installation to complete <span class="keyword">in</span> the guest (about thirty minutes approx.)...</span><br><span class="line">vm created successfully with uuid: a23d5a05-xx89-4xx4-a8b7-6f7b9xxxxxx</span><br></pre></td></tr></table></figure></p>
<h5 id="3-Run-VM"><a href="#3-Run-VM" class="headerlink" title="3. Run VM"></a>3. Run VM</h5><p><img src="/images/anka_demo_720.gif" width="90%" height="90%"></p>
<p>VM 状态之间的转换如下：<br><img src="/images/anka_vm_status.png" width="75%" height="75%"></p>
<blockquote>
<p>需要区别 VM 和后面提到的 instance 关系，VM 更准确点讲是 VM Template，是创建instance的模版，但模版需要通过上面的方法才可以修改；新建VM后，相当于有一个基础的模版，但是要满足其他要求，可以自行在running的 vm 中操作，然后随时保存，类似于docker container的commit操作，但anka build是suspend一个running的 vm 来保存。</p>
</blockquote>
<h5 id="4-Manage-VM-Templates-in-Registry-link"><a href="#4-Manage-VM-Templates-in-Registry-link" class="headerlink" title="4. Manage VM Templates in Registry(link)"></a>4. Manage VM Templates in Registry<a href="https://ankadoc.bitbucket.io/anka-build/#manage-vm-templates-in-registry" target="_blank" rel="noopener">(link)</a></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#罗列仓库</span></span><br><span class="line">➜   anka registry list-repos</span><br><span class="line">++</span><br><span class="line">++</span><br><span class="line"><span class="comment">#添加一个新仓库</span></span><br><span class="line">➜   anka registry add demo-repo http://localhost:8089</span><br><span class="line">➜   anka registry list-repos</span><br><span class="line">++</span><br><span class="line">++</span><br><span class="line">demo-repo (default)</span><br><span class="line">+--------+-----------+</span><br><span class="line">| host   | localhost |</span><br><span class="line">+--------+-----------+</span><br><span class="line">| scheme | http      |</span><br><span class="line">+--------+-----------+</span><br><span class="line">| port   | 8089      |</span><br><span class="line">+--------+-----------+</span><br><span class="line"><span class="comment">#推送VM Templates 到新仓库，</span></span><br><span class="line">➜   anka registry push CatalinaVm -d <span class="string">"first push"</span> -t v1</span><br></pre></td></tr></table></figure>
      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      

    </footer>

  </div>

  

  
  
  

  

</article>
    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/">上一页</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/3/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2018-2020
        qinrui
      </li>
      <li>
        
        Powered by
        
        
        <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <span>
  <i>PV:<span id="busuanzi_value_page_pv"></span></i>
  <i>UV:<span id="busuanzi_value_site_uv"></span></i>
</span>
        
      </li>
      
      <li>
        <!-- cnzz统计 -->
        
      </li>
    </ul>
  </div>
</footer>
      <div class="to_top">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>
      </div>
    </main>
    <aside class="sidebar">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/palm-tree.svg" alt="一笑皆春"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2020/03/16/about/">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search" title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    
  </div>
</div>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/share.js"></script>
<script src="/js/lazyload.min.js"></script>

<script>
  try {
    var typed = new Typed("#subtitle", {
      strings: ['2020 - 开启20年代', '知道一无所知', '风雨不动安如山'],
      startDelay: 0,
      typeSpeed: 200,
      loop: true,
      backSpeed: 100,
      showCursor: true
    });
  } catch (err) {
  }

</script>





<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/ayer.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>



<script src="/js/busuanzi-2.3.pure.min.js"></script>


<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>

    
    <div id="music">
    
    
    
    <iframe frameborder="no" border="1" marginwidth="0" marginheight="0" width="200" height="52" src="//music.163.com/outchain/player?type=2&id=4898912&auto=0&height=32"></iframe>
</div>

<style>
    #music {
        position: fixed;
        right: 15px;
        bottom: 0;
        z-index: 998;
    }
</style>
    
  </div>
</body>

</html>