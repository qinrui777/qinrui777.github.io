<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
    
  <meta name="description" content="请拍砖～～～" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     一笑皆春
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <link rel="stylesheet" href="/css/main.css">
  
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
  
  

  

</head>

</html>

<body>
  <div id="app">
    <main class="content">
      
<section class="cover">
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover2.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">一笑皆春</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>

<div id="main">
  <section class="outer">
  <article class="articles">
    
    
    
    
    <article id="post-IntelliJ-与-Gradle版本不兼容" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/11/06/IntelliJ-与-Gradle版本不兼容/"
    >IntelliJ 与 Gradle版本不兼容</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/11/06/IntelliJ-与-Gradle版本不兼容/" class="article-date">
  <time datetime="2020-11-06T02:25:07.000Z" itemprop="datePublished">2020-11-06</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p>IntelliJ version: 2018.2.7 CE</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">IntelliJ IDEA 2018.2.7 (Community Edition)</span><br><span class="line">Build <span class="comment">#IC-182.5107.41, built on November 27, 2018</span></span><br><span class="line">JRE: 1.8.0_152-release-1248-b22 amd64</span><br><span class="line">JVM: OpenJDK 64-Bit Server VM by JetBrains s.r.o</span><br><span class="line">Windows 10 10.0</span><br></pre></td></tr></table></figure>
<p>Gradle version 6.1.1</p>
<p>报错截图如下：</p>
<p><img src="/images/intellij_error.png" alt="error"></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">java.lang.NoClassDefFoundError: org/gradle/api/internal/plugins/DefaultConvention</span><br><span class="line">	at org.jetbrains.plugins.gradle.tooling.builder.ProjectExtensionsDataBuilderImpl.buildAll(ProjectExtensionsDataBuilderImpl.groovy:50)</span><br><span class="line">	at org.jetbrains.plugins.gradle.tooling.internal.ExtraModelBuilder.buildAll(ExtraModelBuilder.java:67)</span><br><span class="line">	at org.gradle.tooling.provider.model.internal.DefaultToolingModelBuilderRegistry<span class="variable">$BuildOperationWrappingToolingModelBuilder</span><span class="variable">$1</span><span class="variable">$1</span>.create(DefaultToolingModelBuilderRegistry.java:104)</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h3 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h3><p><strong>step1</strong></p>
<p><img src="/images/intellij-step1.png" alt="step11"></p>
<p><strong>step2</strong></p>
<p><img src="/images/intellij-step2.png" alt="step2"></p>
<p>大致原因就是版本不匹配，都是时间从中作祟。</p>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tools/">Tools</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-谈系列-谈家2020" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/09/17/谈系列-谈家2020/"
    >谈系列-谈家2020</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/09/17/谈系列-谈家2020/" class="article-date">
  <time datetime="2020-09-17T07:12:02.000Z" itemprop="datePublished">2020-09-17</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      Here's something encrypted, password is required to continue reading.
      
      <a class="article-more-link" href="/2020/09/17/谈系列-谈家2020/">阅读更多...</a>
      
      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Q-List/">Q List</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-出行清单" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/08/28/出行清单/"
    >出行清单</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/08/28/出行清单/" class="article-date">
  <time datetime="2020-08-28T08:37:50.000Z" itemprop="datePublished">2020-08-28</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <p>良久的蛰伏后，迎来一次出差的机会，时隔近2年吧。小时候梦想着能走出去，多坐坐火车、飞机、轮船等等，长大后实现了，发现并不那么美好。</p>
<h3 id="1-夏季-短期-出差"><a href="#1-夏季-短期-出差" class="headerlink" title="1.夏季-短期-出差"></a>1.夏季-短期-出差</h3><blockquote>
<p>1个月以内的，衣物数量包括自己身上穿的那一套</p>
</blockquote>
<p>短袖3件以上<br>内裤3件<br>长裤2件<br>袜子3件<br>证件、卡照（身份证，驾照，银行卡）<br>毛巾<br>充电线（手机的，手表的）<br>洗漱包（牙刷，不用电动牙刷）<br>水杯<br>纸巾2包<br>人字拖<br>书2本<br>耳机<br>电脑 及 充电线</p>
<p>特产</p>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Q-List/">Q List</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-让人身心劳累的驾考" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/08/17/让人身心劳累的驾考/"
    >让人身心劳累的驾考</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/08/17/让人身心劳累的驾考/" class="article-date">
  <time datetime="2020-08-17T06:19:43.000Z" itemprop="datePublished">2020-08-17</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      Here's something encrypted, password is required to continue reading.
      
      <a class="article-more-link" href="/2020/08/17/让人身心劳累的驾考/">阅读更多...</a>
      
      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Q-List/">Q List</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-修个数据" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/07/17/修个数据/"
    >修个数据</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/07/17/修个数据/" class="article-date">
  <time datetime="2020-07-17T02:19:16.000Z" itemprop="datePublished">2020-07-17</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tools/">Tools</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <blockquote>
<p>一件事，即使看似平凡，但只要你做深、做久，很快就能变成你的专业，平凡的事情做久了，也能不平凡。</p>
</blockquote>
<p>最近项目中的每天都有很多sql需要执行，以便修复客户的数据，大概持续了近2个月的时间。鉴于开发人员对生产环境的隔离，一般这种修改生产环境数据的活儿就由专职的DBA，或Ops完成。但说到底，开发人员对于sql更熟悉，但这只是通常情况，所以“打铁还需自身硬”。</p>
<p>在没有任何数据管理系统的前提下，如何规范、准确的修复数据，便有很多细节需要我们思考，并找到合适的实践路径，不至于让某些角色花费大量的时间在这个事情上面。</p>
<h3 id="1-审批流程，反馈流程"><a href="#1-审批流程，反馈流程" class="headerlink" title="1. 审批流程，反馈流程"></a>1. 审批流程，反馈流程</h3><p>修改数据通常涉及多方，为了保证流程规范（其实是后期甩锅），有关人员需要掌管好自己手中的小权利，通常涉及 PO, Dev, Ops/DBA, Manager等角色。其他问题：三级审批、四级审批、人多、传话丢失、语义产生歧义等；如果sql有问题，该如何找人，如何反馈，</p>
<h3 id="2-先备份"><a href="#2-先备份" class="headerlink" title="2. 先备份"></a>2. 先备份</h3><p>对于ops人员而言，数据无小事，但在dev眼里，有些表中的数据无足轻重，有些确实很重要，但ops/DBA是不那么了解业务的，也是或许是一些Dev没有经历过丢数据后的无奈和严重后果。</p>
<p>备份规则（即什么情况下需要备份，什么情况可以不备份）：</p>
<ul>
<li>数据量变更大于500条时，必须备份数据</li>
<li>无需备份的需要备注原因，以便其余人了解不备份的上下文</li>
</ul>
<p>备份方式：</p>
<ul>
<li>在数据库里备份,例如  <code>create table &lt;table_a_copy_date&gt; select * from users;</code></li>
<li>少量数据，本地备份，上传到jira中，数据安全问题，</li>
<li>备份到某个云☁️上，有需要的时候开放权限获取备份文件</li>
</ul>
<h3 id="3-执行，用技术去规范"><a href="#3-执行，用技术去规范" class="headerlink" title="3.执行，用技术去规范"></a>3.执行，用技术去规范</h3><p>对于不同的数据库引擎，sql语法有部分差异，使用不同的sql客户端工具，也有不同的差异。</p>
<p>吐槽遇到的问题：</p>
<ul>
<li>sql中的中英文符号不区分，导致的语法问题</li>
<li>单引号’和间隔号`</li>
<li>看着正常，<a href="https://tool.lu/sql/" target="_blank" rel="noopener">https://tool.lu/sql/</a> 也检查不出来的，但其实很有问题的语法 （<a href="https://blog.csdn.net/whatday/article/details/103308922）" target="_blank" rel="noopener">https://blog.csdn.net/whatday/article/details/103308922）</a></li>
<li>多条语句的，不用<code>;</code>分割</li>
<li>自增id，不要随便插入新的id</li>
<li>一个sql需要执行1个小时，而且不能重复执行的，确保不能断网，最好不用本地的sql客户端，而使用tmux 后台执行</li>
</ul>
<p>pipeline化、脚本化, 需包含语法检查、备份、执行、执行后核对等功能，解放ops的双手</p>
<p>dbname.tablename</p>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li><a href="https://tool.lu/sql/" target="_blank" rel="noopener">检查sql语法的在线工具</a></li>
<li>SOAR(SQL Optimizer And Rewriter)   是一个对 SQL 进行优化和改写的自动化工具。 由小米人工智能与云平台的数据库团队开发与维护。<a href="https://github.com/XiaoMi/soar" target="_blank" rel="noopener">github地址</a></li>
<li><a href="https://help.aliyun.com/product/26437.html?spm=5176.cndms.0.0.4a755063X2vQ5l" target="_blank" rel="noopener">数据管理 DMS</a></li>
<li><a href="http://yearning.io/" target="_blank" rel="noopener">Yearning Mysql SQL审核平台</a></li>
</ul>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SQL/">SQL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tools/">Tools</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-逆流而上" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/07/09/逆流而上/"
    >逆流而上</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/07/09/逆流而上/" class="article-date">
  <time datetime="2020-07-09T01:36:38.000Z" itemprop="datePublished">2020-07-09</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/读书笔记/">读书笔记</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h3 id="0-前言"><a href="#0-前言" class="headerlink" title="0.前言"></a>0.前言</h3><p>2020.7.9 又一年的高考结束了，往年都是在6月。青春，逆流而上，听起来都是这么的文艺。而这里讲到的这本书全名是<strong>《逆流而上 阿里巴巴技术成长之路》</strong>，哈哈 o(╯□╰)o。估计我是被这文艺的书名给吸引过去的。</p>
<p>虽然没有细读，但也看到一些很好的总结，于是想记录一下。</p>
<h3 id="1-关于书的信息"><a href="#1-关于书的信息" class="headerlink" title="1.关于书的信息"></a>1.关于书的信息</h3><p>时间： 2018年1月第一版</p>
<p>一句话概括： “本书是阿里巴巴集团荣耀背后的技术血泪史。”</p>
<p>适合谁看： “本书主要面向互联网技术从业人员和在校师生，使读者能够通过此书基本了解阿里在各技术领域的能力，学习在如此规模下可能出现的问题以及解决方案的探讨和沉淀分享。”</p>
<h3 id="2-摘抄"><a href="#2-摘抄" class="headerlink" title="2.摘抄"></a>2.摘抄</h3><ul>
<li><p>“问题处理环节，需要以最快的时间协同不同团队之间的响应处理，避免措施问题排查的最佳时间窗口。“</p>
</li>
<li><p>“稳定性要做好几点：研发与运维要靠近、故障标准要统一并强化处理流程、建设统一的基础设施并完善团队融合做到“书同文车同轨行同伦”</p>
</li>
<li><p>“阿里巴巴集团开发规约中对于ORM规范，有明确一条强制规约：在表查询中，一律不要使用*作为查询的字段列表，需要哪些字段必须明确写明。”</p>
</li>
<li><p>“数据库中的参数配置对SQL执行速度快慢也有非常大的影响，常见的三个参数包括 innodb_buffer_pool_size ,tmp_table_size, query_cache_size,table_cache”<br>（应该是笔误，明明后面也讲到了4个参数，具体参数讲解也自行搜索）</p>
</li>
<li><p>下面的图给了我们定位问题的一些思路，遇到棘手的问题时，要全面考量，逐一排查。不能想当然的去认为“服务器怎么会有问题”，”硬盘不可能会坏“，“网络应该不会有问题吧”<br><img src="https://s1.ax1x.com/2020/07/09/UeDKSK.png" alt="UeDKSK.png"></p>
</li>
</ul>
<p>”为了找出CPU飚高的原因，开发在重启过程中通过执行一下命令找出CPU利用率比较高的线程。“<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -eL -o pid,%cpu,lwp | grep -i pid | sort -nr k2 | awk <span class="string">'&#123;print("%s %s %x\n",1,1,2,$3)&#125;'</span> | head</span><br></pre></td></tr></table></figure></p>
<h3 id="3-读后"><a href="#3-读后" class="headerlink" title="3.读后"></a>3.读后</h3><p>没有细读的原因，应该是鄙人才疏学浅，孤陋寡闻，很多书中的事情我也没遇上过。如果是当事人，读起来应该有一种破解一桩悬案的快感。但处理问题的思路，以及开发人员、运维人员之间的配合经验十分重要，还有复盘（类比于SRE中的验尸报告）等等都是很棒的，书中对于技术细节也有很深的研究，毕竟是要解决一些棘手的问题，代码片段、逻辑图、架构图丰富，涉及基础设施架构、mysql、中间件服务、负载均衡等等很常见的技术，确实不常见的业务量。</p>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-一份几年前的linux命令小手册" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/06/10/一份几年前的linux命令小手册/"
    >一份几年前的linux命令小手册</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/06/10/一份几年前的linux命令小手册/" class="article-date">
  <time datetime="2020-06-10T06:03:07.000Z" itemprop="datePublished">2020-06-10</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h3 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h3><p>大学里可没有运维这门专业，但一部分人阴差阳错的走上了这条道路。如期初的我，像无头苍蝇一般。没有人指点迷津，对职场也懵懵懂懂的。这几天在简单收拾时，找到了一份几年前打印的10多页纸，记录了一些命令。然后这些命令中的一部分我现在也不知道用法，可能是用的太少，但以前那会儿它也是一份传递，带我领略神奇的命令。仅此记录一下，然后丢弃这几页纸张，化为乌有，轻便前行。</p>
<p><strong>再简单的命令，也可能有我们不知道的用法，因为没有细心研究、探索、追问。再说，温故而知新。</strong></p>
<h3 id="1-系统信息检查"><a href="#1-系统信息检查" class="headerlink" title="1.系统信息检查"></a>1.系统信息检查</h3><p>几板斧： <code>uname -a</code>,<code>hostname</code>, <code>ifconfig -a</code> ,<code>date</code>, <code>pwd</code> ,<code>whoami</code></p>
<h3 id="2-性能检查"><a href="#2-性能检查" class="headerlink" title="2.性能检查"></a>2.性能检查</h3><table>
<thead>
<tr>
<th style="text-align:left">检查项</th>
<th>命令</th>
<th style="text-align:center">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">CPU占用率 <br> 内存使用率 <br>内存交换区使用率</td>
<td><code>top</code></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">文件系统占用率</td>
<td><code>df -h</code></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">CPU负载</td>
<td><code>uptime</code></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">系统i/o</td>
<td><code>iostat 1 3</code></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">系统资源使用情况</td>
<td><code>vmstat 1 10</code></td>
<td style="text-align:center">每隔一秒刷新一次，刷新10次</td>
</tr>
</tbody>
</table>
<h3 id="3-安全检查"><a href="#3-安全检查" class="headerlink" title="3.安全检查"></a>3.安全检查</h3><table>
<thead>
<tr>
<th style="text-align:left">检查项</th>
<th>命令</th>
<th style="text-align:center">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">当前登录用户</td>
<td><code>who</code></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">系统重启情况</td>
<td><code>less /var/log/boot.log</code></td>
<td style="text-align:center">部分linux发行版不适用</td>
</tr>
<tr>
<td style="text-align:left">系统日志</td>
<td><code>less /var/log/messages</code></td>
<td style="text-align:center">部分linux发行版不适用</td>
</tr>
<tr>
<td style="text-align:left">系统账户检查</td>
<td><code>more /etc/password</code> <br> <code>more /etc/password</code></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">系统登录情况检查</td>
<td><code>less /var/log/lastlog</code> 或 <code>lastlog</code></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">系统运行时间</td>
<td><code>uptime</code></td>
</tr>
</tbody>
</table>
<h3 id="4-硬件信息"><a href="#4-硬件信息" class="headerlink" title="4.硬件信息"></a>4.硬件信息</h3><table>
<thead>
<tr>
<th style="text-align:left">检查项</th>
<th>命令</th>
<th style="text-align:center">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">查看硬件信息</td>
<td><code>dmidecode</code></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">硬件启动信息</td>
<td><code>dmesg</code></td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Shell/">Shell</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Server-我是谁-我在哪里" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/05/25/Server-我是谁-我在哪里/"
    >Server:我是谁,我在哪里...</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/05/25/Server-我是谁-我在哪里/" class="article-date">
  <time datetime="2020-05-25T02:14:53.000Z" itemprop="datePublished">2020-05-25</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <p>给你一台现成的服务器，你该如何了解它？(可以是linux的，也可以是Windows,也可能是mac os),但这里更多的假设是linux吧，因为更加常见，假如你ssh到了一台新服务器，除此之外，别人什么都没告诉你，你该怎么办？</p>
<h3 id="我是谁-第一问"><a href="#我是谁-第一问" class="headerlink" title="我是谁-第一问"></a>我是谁-第一问</h3><p><code>hostname</code></p>
<p><code>whoami</code> 或 <code>id</code></p>
<h3 id="我是谁-第二问"><a href="#我是谁-第二问" class="headerlink" title="我是谁-第二问"></a>我是谁-第二问</h3><p>linux有很多发行版本，每个都有点儿不一样，就比如下载软件的命令就是不一样的，不是每台服务器都是你所熟悉的centos，或者 ubuntu。不要去“我以为…”，而是我先确认一下，怎么确认是我们需要思考的。</p>
<p><a href="https://www.cyberciti.biz/faq/how-to-check-os-version-in-linux-command-line/" target="_blank" rel="noopener">How to check os version in Linux command line</a></p>
<p>比如说说 <code>hostnamectl</code> 命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">root@saltmaster:~<span class="comment"># hostnamectl</span></span><br><span class="line">   Static hostname: saltmaster</span><br><span class="line">         Icon name: computer-vm</span><br><span class="line">           Chassis: vm</span><br><span class="line">        Machine ID: 5ff54f44069c4ce289690d8b20a3a8d4</span><br><span class="line">           Boot ID: ca1c7b0381c74fadb52f2065c2bf8648</span><br><span class="line">    Virtualization: oracle   <span class="comment"># 是否使用虚拟化，及哪家的虚拟化，我这里是 vagrant + virtaul box启动的一台服务器</span></span><br><span class="line">    <span class="comment"># 如果看到的是   Virtualization: microsoft 这种，就说明是微软的，大概率是azure吧.</span></span><br><span class="line">  Operating System: Ubuntu 18.04.4 LTS</span><br><span class="line">            Kernel: Linux 4.15.0-91-generic  <span class="comment"># 内核版本</span></span><br><span class="line">      Architecture: x86-64   <span class="comment">#服务器的架构</span></span><br></pre></td></tr></table></figure>
<h3 id="我在哪里-几点了-第三问"><a href="#我在哪里-几点了-第三问" class="headerlink" title="我在哪里,几点了-第三问"></a>我在哪里,几点了-第三问</h3><p>date</p>
<p>tree</p>
<p>ps </p>
<p>systemctl service</p>
<h3 id="出错了，怎么办"><a href="#出错了，怎么办" class="headerlink" title="出错了，怎么办-"></a>出错了，怎么办-</h3><p>日志<br>Application Logs<br>Event Logs<br>Service Logs<br>System Logs</p>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Shell/">Shell</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-疫情的启示-伪上帝之眼" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/05/23/疫情的启示-伪上帝之眼/"
    >疫情的启示[伪上帝之眼]</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/05/23/疫情的启示-伪上帝之眼/" class="article-date">
  <time datetime="2020-05-23T07:06:22.000Z" itemprop="datePublished">2020-05-23</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><blockquote>
<p>从武汉封城（2020.01.23）到今天（2020.05.23）,正好4个月时间。一年过去了1/3，度过去了2个季节，很多节日（春节、元宵、38、清明、劳动节、青年节…）还有很多我们自己创造出来的节日。但在武汉的氛围里，少些悲伤就是幸运的，节日的快乐变小了很多，心中的畏惧变大了很多。时至今日，出门买菜、坐车也还能看到一些人手上带的一次性手套，还有面罩，至于口罩，是这里的每个人出门的必需品。5月，去过安徽，回过老家，一切大体如初了，武汉成了最不一样的地方，甚至在5月中旬回老家，有的人畏惧我这个从武汉回去的人。在懂事的年纪经历这样一场大事件，而且身处正中心，有些想法还是值得记录，不然哪天忘记了。</p>
</blockquote>
<p>以下一部分内容是早在3月份，疫情形势依旧严峻时的所想：</p>
<h3 id="1-保持信息敏感"><a href="#1-保持信息敏感" class="headerlink" title="1.保持信息敏感"></a>1.保持信息敏感</h3><p>&ensp;&ensp;&ensp;&ensp;社会中大事件的发生，前夕必定有风声，有的人捕捉到了且重视，有的人置若罔闻。而来自专业领域的事情，非专业人士无从判断，但应该学习着去判断去思想前因后果，毕竟就像这次会生死攸关。对于信息来源，那一道看不见的墙在哪里，但也是不同看法的来源地，多听听未必是件坏事情，决定是在自己身心中的不是吗。需要多渠道的去获取关键信息，也需要辨别真伪，专业网站、官方网站的信息不可忽视，有些小道消息也很重要，而且中英文的都需要阅读。如果英文不好，尚可用一些翻译工具。</p>
<h3 id="2-超预期的准备"><a href="#2-超预期的准备" class="headerlink" title="2.超预期的准备"></a>2.超预期的准备</h3><p>&ensp;&ensp;&ensp;&ensp;疫情期间，我们很多人做的一件事情就是屯东西，因为商店关门了，各种社会交易停止了，包括耐以生存的食物交易也受到了管控。口罩难求，要屯一点；大米不够，要屯一点；卫生纸不足，要吞一点….还有很多很多东西，零食？汽油？酒精？消毒剂？猪肉？ 而另一件凑巧的事情就是，春节前期武汉有准备腊肉腊鱼的习惯，这个时候这些荤菜派上了用场，古老的食物做法让我们在特殊的时间里还能享受到肉的味道。但是屯多久的东西了，每个人对持续的时间都有自己的看法，但都是来自自信的第六感。最好还是寻求专业的建议，比如疫情期间的流行病“老师傅”，比如那些有野外生存能力的人。最好，<strong>给那第六感的结果来个加倍，或者三倍吧</strong>，比如很多人预期1-2个月疫情就会过去，那你就按照3-4个月去储备物品，当然这没什么根据，但有总比没有好，这里的多也比少好。很多我们不了解的事情上，也都这么准备吧。比如外出带几天的干粮，第六感的双倍吧。</p>
<h3 id="3-公共卫生"><a href="#3-公共卫生" class="headerlink" title="3.公共卫生"></a>3.公共卫生</h3><p>&ensp;&ensp;&ensp;&ensp;口罩、公筷、勤洗手、消毒用品…这些在我们平日里不太注重的东西，一些就在这样的时候成了我们保护自身的唯一方法。口罩，我以为是属于明星的必需品，或是用来冬天御寒的，更别提医用口罩，每家每户都缺少。今后每年的流感季节，我们也应该多嘱咐我们自己和家人朋友，多注意在人多的地方戴口罩，勤洗手，家庭消毒等等。如果，是做餐饮的，最好常带口罩，至少飞沫传播会被大大的减少。也不要随意用手揉眼睛，可能会让手上的细菌病毒等从眼睛粘膜处进入体内。题外话：口罩也是有好处的，别人看不见你的生气或是喜悦，也看不见你的全部五官，神秘感倍增，勇气有时候也倍增。</p>
<blockquote>
<p>对了，口罩遮面，眼睛就成了“窗口”，原来每个人的“窗口”还挺好看，也留下了想象的空间。</p>
</blockquote>
<h3 id="4-心态心理"><a href="#4-心态心理" class="headerlink" title="4.心态心理"></a>4.心态心理</h3><p>&ensp;&ensp;&ensp;&ensp;在强大的病毒氛围下，每个人如兵临城下一般，害怕肉眼看不见的东西闯入自己体内。有人上门量体温时，觉得自己有点热，心想是不是发烧了，可能又有点儿胸闷，是不是呼吸有点问题。心理的压力大小直接影响免疫力的强弱，但这种模糊的关系也是看不见摸不着的。心理受到影响，做事情的态度也自然会被影响到。比如我就无心专心的完成一些事情，心中杂念挥之不去。最好的方法，还没每天给自己设定几个任务，完成了就打个勾，不让自己漫无目的在电脑前，或者门前。</p>
<h3 id="5-随身携带随时准备着"><a href="#5-随身携带随时准备着" class="headerlink" title="5.随身携带随时准备着"></a>5.随身携带随时准备着</h3><p>&ensp;&ensp;&ensp;&ensp;听闻因为春节回家的缘故，很多人没有选择带电脑回家，可谁知这个春节有点儿太长了，于是无法在家办公。与电脑类似的东西，还有比如剃须刀，充电器，耳机，相机，每个人的职业不一样，总有些工具需要常用到，有条件的最好还是常带在身边，不然意外的就是很意外的。另一个方面讲，出差的我不喜欢携带太多东西，有些可有可无的不带，轻松上阵，上下车的步伐都轻盈一些。如何取舍，视情况而定了。</p>
<h3 id="6-富贵险中求"><a href="#6-富贵险中求" class="headerlink" title="6.富贵险中求"></a>6.富贵险中求</h3><p>&#160;&#160;无，留点遐想的空间。</p>
<p><hr><br><strong>后记:</strong> 2020.05.20在小区楼下做的核酸检测，今天终于可以查到结果了，正常。</p>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Q-List/">Q List</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-那些容易被忘记的小事儿-Tech" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/05/03/那些容易被忘记的小事儿-Tech/"
    >那些容易被忘记的小事儿-Tech</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/05/03/那些容易被忘记的小事儿-Tech/" class="article-date">
  <time datetime="2020-05-03T02:31:00.000Z" itemprop="datePublished">2020-05-03</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tools/">Tools</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <p>有些东西容易记住，有些往往可以往脑子里记却总是忘记，没办法了。</p>
<h3 id="shell命令"><a href="#shell命令" class="headerlink" title="shell命令"></a>shell命令</h3><p>命令行窗口可以使用以下的编辑命令，就是当你登录到一个服务器时，或者打开一个shell时用的。</p>
<p><code>Ctrl-R</code> 搜索输入命令的历史<br><code>!!</code> 重复上一个命令<br><code>!$</code> 上一个命令中最后一个参数<br><code>Ctrl-w</code> 删除上一个输入的词<br><code>Ctrl-U</code> 从光标位置删除到行首<br><code>Ctrl-K</code> 从光标位置删除到行尾</p>
<h3 id="Sublime快捷键"><a href="#Sublime快捷键" class="headerlink" title="Sublime快捷键"></a>Sublime快捷键</h3><p>在每一行行首增加字符串</p>
<p>第一步：选中全部内容 <code>ctrl+A</code><br>第二步：进入待操作状态，然后 <code>ctrl+shift+L</code></p>
<p>但实际，在我的MBP上是 <code>command + shift + L</code></p>
<h3 id="vim-列编辑"><a href="#vim-列编辑" class="headerlink" title="vim 列编辑"></a>vim 列编辑</h3><p>链接：<a href="https://tlanyan.me/vim-colume-edit-summary/" target="_blank" rel="noopener">https://tlanyan.me/vim-colume-edit-summary/</a></p>
<p>步骤：</p>
<ul>
<li>1.在 普通模式 按 ctrl+v 进入 可视块 模式；</li>
<li>2.使用 hjkl 移动光标选择要编辑的块；</li>
<li>3.视情况而定（看下面）；</li>
<li>4.按 esc 退出（非必须）。</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">操作</th>
<th style="text-align:center">第3步的按键</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">光标前插入</td>
<td style="text-align:center">按 <code>shift+i</code></td>
</tr>
<tr>
<td style="text-align:left">删除</td>
<td style="text-align:center">按 <code>x</code> 或者<code>d</code></td>
</tr>
<tr>
<td style="text-align:left">替换</td>
<td style="text-align:center">按 <code>r</code></td>
</tr>
</tbody>
</table>
<h3 id="PROMPT-COMMAND"><a href="#PROMPT-COMMAND" class="headerlink" title="PROMPT_COMMAND"></a>PROMPT_COMMAND</h3><p>Bash shell executes the content of the PROMPT_COMMAND just before displaying the PS1 variable. (即添加显示在PS1前面的内容)</p>
<p><code>export PROMPT_COMMAND=&quot;echo -n \(dev\)&quot;</code><br><code>export PROMPT_COMMAND=&quot;date +%k:%m:%S&quot;</code></p>
<p>If you want to display the value of PROMPT_COMMAND in the same line as the PS1, use the echo -n as shown below.<br><code>export PROMPT_COMMAND=&quot;echo -n [$(date +%k:%m:%S)]&quot;</code></p>
<p>效果如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vagrant@minion1:~$ <span class="built_in">export</span> PROMPT_COMMAND=<span class="string">"echo -n \(dev\)"</span></span><br><span class="line">(dev)vagrant@minion1:~$</span><br></pre></td></tr></table></figure></p>
<h3 id="awk内建变量"><a href="#awk内建变量" class="headerlink" title="awk内建变量"></a>awk内建变量</h3><p>使用awk时，有时第一行是列名，需要过滤掉，从第二行开始显示。</p>
<p><code>kubectl get node | awk &#39;NR!=1&#39;</code></p>
<blockquote>
<p>NR(Number of Record) 表示的是已经处理过的总记录数目，或者说行号, 上面的 <code>NR!=1</code> 表示不打印第一行，相应地，<code>NR!=2</code> 表示不打印第二行.</p>
</blockquote>
<p>只打印最后一列<br><code>kubectl get node | awk &#39;{print $NF}&#39;</code></p>
<h3 id="TCP连接的状态详解以及故障排查"><a href="#TCP连接的状态详解以及故障排查" class="headerlink" title="TCP连接的状态详解以及故障排查"></a>TCP连接的状态详解以及故障排查</h3><blockquote>
<p><a href="https://blog.csdn.net/hguisu/article/details/38700899" target="_blank" rel="noopener">https://blog.csdn.net/hguisu/article/details/38700899</a></p>
</blockquote>
<p><img src="https://s1.ax1x.com/2020/09/03/wPC8yQ.png" alt="wPC8yQ.png"></p>
<p>TCP状态及其描述如下表。</p>
<table>
<thead>
<tr>
<th style="text-align:left">状态</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">LISTEN</td>
<td style="text-align:left">等待来自远程TCP应用程序的请求</td>
</tr>
<tr>
<td style="text-align:left">SYN_SENT</td>
<td style="text-align:left">发送连接请求后等待来自远程端点的确认。TCP第一次握手后客户端所处的状态</td>
</tr>
<tr>
<td style="text-align:left">SYN-RECEIVED</td>
<td style="text-align:left">该端点已经接收到连接请求并发送确认。\n 该端点正在等待最终确认。TCP第二次握手后服务端所处的状态</td>
</tr>
<tr>
<td style="text-align:left">ESTABLISHED</td>
<td style="text-align:left">代表连接已经建立起来了。这是连接数据传输阶段的正常状态</td>
</tr>
<tr>
<td style="text-align:left">FIN_WAIT_1</td>
<td style="text-align:left">等待来自远程TCP的终止连接请求或终止请求的确认</td>
</tr>
<tr>
<td style="text-align:left">FIN_WAIT_2</td>
<td style="text-align:left">在此端点发送终止连接请求后，等待来自远程TCP的连接终止请求</td>
</tr>
<tr>
<td style="text-align:left">CLOSE_WAIT</td>
<td style="text-align:left">该端点已经收到来自远程端点的关闭请求，此TCP正在等待本地应用程序的连接终止请求</td>
</tr>
<tr>
<td style="text-align:left">CLOSING</td>
<td style="text-align:left">等待来自远程TCP的连接终止请求确认</td>
</tr>
<tr>
<td style="text-align:left">LAST_ACK</td>
<td style="text-align:left">等待先前发送到远程TCP的连接终止请求的确认</td>
</tr>
<tr>
<td style="text-align:left">TIME_WAIT</td>
<td style="text-align:left">等待足够的时间来确保远程TCP接收到其连接终止请求的确认</td>
</tr>
</tbody>
</table>
<h3 id="sort-用法"><a href="#sort-用法" class="headerlink" title="sort 用法"></a>sort 用法</h3><blockquote>
<p><a href="https://segmentfault.com/a/1190000005713784" target="_blank" rel="noopener">https://segmentfault.com/a/1190000005713784</a><br>| 选项 |                解释               |<br>|:—-:|:———————————-|<br>| <code>-u</code>    |去除重复行                          |<br>| <code>-r</code>    |sort默认的排序方式是升序，-r是反过来    |<br>| <code>-n</code>    |默认数字按字符来排序（10在排2前头），-n 指明要以数值来排序  |<br>| <code>-t</code>  |指定分隔符 例如： <code>-t  :</code>     |<br>| <code>-k</code>  |指定按哪一列排序 ，例如 <code>-k 3</code> |</p>
</blockquote>
<p>-k高级用法，例如 “按公司英文名称的第二个字母排序”</p>
<p>参考；</p>
<ul>
<li><p><a href="https://www.runoob.com/w3cnote/8-awesome-awk-built-in-variables.html" target="_blank" rel="noopener">https://www.runoob.com/w3cnote/8-awesome-awk-built-in-variables.html</a></p>
</li>
<li><p><a href="https://wiki.jikexueyuan.com/project/awk/built-in-variables.html" target="_blank" rel="noopener">https://wiki.jikexueyuan.com/project/awk/built-in-variables.html</a></p>
</li>
</ul>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tools/">Tools</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
  </article>
  

  
  <nav class="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/2/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2018-2020
        qinrui
      </li>
      <li>
        
        Powered by
        
        
        <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <span>
  <i>PV:<span id="busuanzi_value_page_pv"></span></i>
  <i>UV:<span id="busuanzi_value_site_uv"></span></i>
</span>
        
      </li>
      
      <li>
        <!-- cnzz统计 -->
        
      </li>
    </ul>
  </div>
</footer>
      <div class="to_top">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>
      </div>
    </main>
    <aside class="sidebar">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/palm-tree.svg" alt="一笑皆春"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2020/03/16/about/">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    
  </div>
</div>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/share.js"></script>
<script src="/js/lazyload.min.js"></script>

<script>
  try {
    var typed = new Typed("#subtitle", {
      strings: ['2020 - 开启20年代', '知道一无所知', '风雨不动安如山'],
      startDelay: 0,
      typeSpeed: 200,
      loop: true,
      backSpeed: 100,
      showCursor: true
    });
  } catch (err) {
  }

</script>





<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/ayer.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>



<script src="/js/busuanzi-2.3.pure.min.js"></script>


    
    <div id="music">
    
    
    
    <iframe frameborder="no" border="1" marginwidth="0" marginheight="0" width="200" height="52"
        src="//music.163.com/outchain/player?type=2&id=4898912&auto=0&height=32"></iframe>
</div>

<style>
    #music {
        position: fixed;
        right: 15px;
        bottom: 0;
        z-index: 998;
    }
</style>
    
  </div>
</body>

</html>